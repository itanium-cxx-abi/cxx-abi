<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] Non-cloned [cd]tors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Non-cloned%20%5Bcd%5Dtors&In-Reply-To=%3CB762E0E7F3807D4A8178162D999827461DDC02FA1E%40GVW1155EXB.americas.hpqcorp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002269.html">
   <LINK REL="Next"  HREF="002276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] Non-cloned [cd]tors</H1>
    <B>de Dinechin, Christophe (Integrity VM)</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Non-cloned%20%5Bcd%5Dtors&In-Reply-To=%3CB762E0E7F3807D4A8178162D999827461DDC02FA1E%40GVW1155EXB.americas.hpqcorp.net%3E"
       TITLE="[cxx-abi-dev] Non-cloned [cd]tors">christophe.de-dinechin at hp.com
       </A><BR>
    <I>Thu Nov 19 09:08:41 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002269.html">[cxx-abi-dev] Non-cloned [cd]tors
</A></li>
        <LI>Next message: <A HREF="002276.html">[cxx-abi-dev] Non-cloned [cd]tors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2275">[ date ]</a>
              <a href="thread.html#2275">[ thread ]</a>
              <a href="subject.html#2275">[ subject ]</a>
              <a href="author.html#2275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> My recollection is that they were all supposed to be emitted in a
</I>&gt;<i> single COMDAT group, and that if you provided a definition of any one, you had
</I>&gt;<i> to provide all of them.  That way it doesn't matter which of those
</I>&gt;<i> COMDAT groups you ended up with.  The expectation was that they were in
</I>&gt;<i> fact multiple entry points, and thus the fact that you had to emit all
</I>&gt;<i> of them together was no big deal.
</I>
That's also my recollection, and Dennis confirmed that this is how we did it.

However, Jason's point that multiple compilers may end up making different choices remain interesting. Shouldn't we at least attempt to explain the rationale of how this is supposed to work if the compiler for the derived class and base class are different? As Dennis wrote, right now it requires way too much implicit knowledge. It breaks easily, say if one of the compilers optimizes away an &quot;unneeded&quot; constructor from one of the COMDATs. So we need to make it clear why a compiler must emit constructors that it doesn't need.

Just $.02 from a rusty old friend who forgot everything about C++...
Christophe

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002269.html">[cxx-abi-dev] Non-cloned [cd]tors
</A></li>
	<LI>Next message: <A HREF="002276.html">[cxx-abi-dev] Non-cloned [cd]tors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2275">[ date ]</a>
              <a href="thread.html#2275">[ thread ]</a>
              <a href="subject.html#2275">[ subject ]</a>
              <a href="author.html#2275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
