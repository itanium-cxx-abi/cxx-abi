<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] C++0x POD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20C%2B%2B0x%20POD&In-Reply-To=%3CB50ACD9A-40B4-4E73-962F-E26A8115AF91%40edg.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002198.html">
   <LINK REL="Next"  HREF="002201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] C++0x POD</H1>
    <B>David Vandevoorde</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20C%2B%2B0x%20POD&In-Reply-To=%3CB50ACD9A-40B4-4E73-962F-E26A8115AF91%40edg.com%3E"
       TITLE="[cxx-abi-dev] C++0x POD">daveed at edg.com
       </A><BR>
    <I>Sat Jul 18 09:53:08 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002198.html">[cxx-abi-dev] C++0x POD
</A></li>
        <LI>Next message: <A HREF="002201.html">[cxx-abi-dev] C++0x POD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2200">[ date ]</a>
              <a href="thread.html#2200">[ thread ]</a>
              <a href="subject.html#2200">[ subject ]</a>
              <a href="author.html#2200">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 17, 2009, at 8:05 AM, Lawrence Crowl wrote:
[...]
&gt;<i> Remember that the internal implementation of std::string is part of  
</I>&gt;<i> the
</I>&gt;<i> ABI because of the inline functions.
</I>
It would be part of it even for non-inline functions: Both sides have  
to agree on how to interpret the objects &quot;blob of data&quot;.

&gt;<i>  A consequences is that introducing
</I>&gt;<i> the new implementation of string will break the ABI.
</I>
Most implementation don't have to change their internal representation.

&gt;<i>  This new
</I>&gt;<i> implementation is actually fairly important to my company, to the  
</I>&gt;<i> extent
</I>&gt;<i> that we have redirected all our code to it, suffering interoperability
</I>&gt;<i> problems with the current standard.
</I>&gt;<i>
</I>&gt;<i> The C++0x library now requires an O(1) size operator.
</I>
Not yet :-)  That will be voted on in a few hours (at the time of the  
time of this writing).

&gt;<i>  This will cause
</I>&gt;<i> an ABI breaking change in something like half of the std::list
</I>&gt;<i> implementations, one of which is gcc.
</I>

The discussion at the Frankfurt meeting (yesterday, at the time of  
this writing) suggested GCC was the _only_ implementation requiring a  
change.

&gt;<i>  Other types are affected, though
</I>&gt;<i> we don't know how many will actually change the ABI.
</I>

Which types were you thinking of?

&gt;<i> Howard Hinnant informs me that Apple plans to not have any binary
</I>&gt;<i> compatibility between the two versions of the standard, except that
</I>&gt;<i> standard exceptions are binary compatible and hence can cross from one
</I>&gt;<i> version to another.
</I>

And certainly every vendor is at liberty to change their library  
signatures.  However, some vendors also plan to  avoid breaking  
library compatibility if they can and with the current standard  
revision, that is entirely possible (because they already have an O(1)  
std::list::size() and a non-reference-counted std::string).

Even those vendors that will have to break compatibility may provide  
binary compatibility options with e.g. inline namespaces.

In either case, I am not willing to foil such goals by changing the  
underlying ABI.

     Daveed



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002198.html">[cxx-abi-dev] C++0x POD
</A></li>
	<LI>Next message: <A HREF="002201.html">[cxx-abi-dev] C++0x POD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2200">[ date ]</a>
              <a href="thread.html#2200">[ thread ]</a>
              <a href="subject.html#2200">[ subject ]</a>
              <a href="author.html#2200">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
