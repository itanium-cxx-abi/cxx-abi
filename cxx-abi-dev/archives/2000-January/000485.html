<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> array new-expressions: proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20array%20new-expressions%3A%20proposal&In-Reply-To=%3C10001241521.ZM99602%40isolde.engr.sgi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000480.html">
   <LINK REL="Next"  HREF="000486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>array new-expressions: proposal</H1>
    <B>Matt Austern</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20array%20new-expressions%3A%20proposal&In-Reply-To=%3C10001241521.ZM99602%40isolde.engr.sgi.com%3E"
       TITLE="array new-expressions: proposal">austern at isolde.engr.sgi.com
       </A><BR>
    <I>Mon Jan 24 23:21:49 UTC 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="000480.html">array new-expressions: proposal
</A></li>
        <LI>Next message: <A HREF="000486.html">Vcall/vbase offset clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#485">[ date ]</a>
              <a href="thread.html#485">[ thread ]</a>
              <a href="subject.html#485">[ subject ]</a>
              <a href="author.html#485">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 24,  7:55pm, Martin von Loewis wrote:
&gt;<i> Subject: Re: array new-expressions: proposal
</I>&gt;<i> &gt; We could just put in 16-byte padding for all types, but I think that's
</I>&gt;<i> &gt; a waste.  There's no reason to do it.  It's just as easy to use 8-
</I>&gt;<i> &gt; byte padding in general, and 16 only when we have to.
</I>&gt;<i>
</I>&gt;<i> I'd like to repeat my proposal that there is *no padding* if the type
</I>&gt;<i> does not have a destructor. In that case, you could use the outcome of
</I>&gt;<i> operator new directly for arrays of char and unsigned char; the
</I>&gt;<i> multiple mentioned in 5.3.4/10 would be 0.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Martin
</I>&gt;<i>-- End of excerpt from Martin von Loewis
</I>
That's an interesting idea, and it's yet another example of why
there really might be good reason for the standard to have granted
implementors as much freedom as it did.  It's certainly tempting
not to waste 8 bytes when we don't have to.

One of the things I'll have to think about is whether there are
any reasons that users might want to have that array count for
their own versions of placement new, provided that they're willing
to write nonportable code.  (And if they're not willing to write
nonportable code, then they shouldn't be using array placement
new.)

			--Matt


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000480.html">array new-expressions: proposal
</A></li>
	<LI>Next message: <A HREF="000486.html">Vcall/vbase offset clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#485">[ date ]</a>
              <a href="thread.html#485">[ thread ]</a>
              <a href="subject.html#485">[ subject ]</a>
              <a href="author.html#485">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
