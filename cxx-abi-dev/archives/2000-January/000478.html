<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> array new-expressions: proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20array%20new-expressions%3A%20proposal&In-Reply-To=%3C10001241029.ZM102394%40isolde.engr.sgi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000481.html">
   <LINK REL="Next"  HREF="000482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>array new-expressions: proposal</H1>
    <B>Matt Austern</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20array%20new-expressions%3A%20proposal&In-Reply-To=%3C10001241029.ZM102394%40isolde.engr.sgi.com%3E"
       TITLE="array new-expressions: proposal">austern at isolde.engr.sgi.com
       </A><BR>
    <I>Mon Jan 24 18:29:44 UTC 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="000481.html">array new-expressions: proposal
</A></li>
        <LI>Next message: <A HREF="000482.html">array new-expressions: proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#478">[ date ]</a>
              <a href="thread.html#478">[ thread ]</a>
              <a href="subject.html#478">[ subject ]</a>
              <a href="author.html#478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 23,  1:40am, Jason Merrill wrote:

&gt;<i> Matt:  Why not just say
</I>&gt;<i>
</I>&gt;<i>   padding = max (sizeof (size_t), alignof (T))
</I>&gt;<i>
</I>&gt;<i> ?  I don't see any reason to mention long double by name, and I don't
</I>&gt;<i> see much of a reason to treat char specially, either.  Are there any
</I>&gt;<i> alignment constraints on 'new char' in the standard?
</I>
There are specific constraints on char and unsigned char, yes.
(But not, interestingly enough, on signed char or on any other
type of size 1.)

5.3.4/10: &quot;For arrays of char and unsigned char, the difference between
the result of the new-expression and the address returned by the
allocation function shall be an integral multiple of the most stringent
alignment requirement of the object type whose size is no greater than
the size of the array being created.&quot;

We could just put in 16-byte padding for all types, but I think that's
a waste.  There's no reason to do it.  It's just as easy to use 8-
byte padding in general, and 16 only when we have to.

			--Matt



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000481.html">array new-expressions: proposal
</A></li>
	<LI>Next message: <A HREF="000482.html">array new-expressions: proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#478">[ date ]</a>
              <a href="thread.html#478">[ thread ]</a>
              <a href="subject.html#478">[ subject ]</a>
              <a href="author.html#478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
