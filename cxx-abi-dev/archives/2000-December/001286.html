<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Empty class passing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Empty%20class%20passing&In-Reply-To=%3C20001213075114I.mitchell%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001285.html">
   <LINK REL="Next"  HREF="001280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Empty class passing</H1>
    <B>Mark Mitchell</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Empty%20class%20passing&In-Reply-To=%3C20001213075114I.mitchell%40codesourcery.com%3E"
       TITLE="Empty class passing">mark at codesourcery.com
       </A><BR>
    <I>Wed Dec 13 15:51:14 UTC 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="001285.html">Empty class passing
</A></li>
        <LI>Next message: <A HREF="001280.html">Transition (was Moving on)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1286">[ date ]</a>
              <a href="thread.html#1286">[ thread ]</a>
              <a href="subject.html#1286">[ subject ]</a>
              <a href="author.html#1286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;&gt;&gt;<i> &quot;Jason&quot; == Jason Merrill &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">jason at redhat.com</A>&gt; writes:
</I>
    &gt;&gt; In particular, after polling lots of C++ experts, it turns out
    &gt;&gt; that nobody cares about optimizing empty class passing.

    Jason&gt; Nobody may care in the abstract, but STL uses empty classes
    Jason&gt; quite a bit (for iterator tags), and passes them to

Right.  The consensus from the people I talked to (mostly various
kinds of generic programming people) was that there are two cases:

  - The function is inline.  In that case, the paramter should
    be optimized away by the compiler.

  - The function is not inline.  In that case, the function call
    overhead dwarfs the use of one additional register.

Obviously, there is bound to be some pathological example involving
tons and tons of empty parameters to a single function where this
isn't true, but I think the idea is right in principle.

    Jason&gt; functions, so I still think it's useful to optimize.  But
    Jason&gt; perhaps not in a way that affects the ABI; your change
    Jason&gt; sounds fine to me.

Good.

--
Mark Mitchell                   <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">mark at codesourcery.com</A>
CodeSourcery, LLC               <A HREF="http://www.codesourcery.com">http://www.codesourcery.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001285.html">Empty class passing
</A></li>
	<LI>Next message: <A HREF="001280.html">Transition (was Moving on)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1286">[ date ]</a>
              <a href="thread.html#1286">[ thread ]</a>
              <a href="subject.html#1286">[ subject ]</a>
              <a href="author.html#1286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
