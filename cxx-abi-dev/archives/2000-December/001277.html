<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> C++ Exception object layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20C%2B%2B%20Exception%20object%20layout&In-Reply-To=%3C87FB8F5CE210D311B60500A0C9F4871C0A143075%40xcup01.cup.hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001278.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>C++ Exception object layout</H1>
    <B>DE-DINECHIN,CHRISTOPHE (HP-Cupertino,ex1)</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20C%2B%2B%20Exception%20object%20layout&In-Reply-To=%3C87FB8F5CE210D311B60500A0C9F4871C0A143075%40xcup01.cup.hp.com%3E"
       TITLE="C++ Exception object layout">christophe_de-dinechin at hp.com
       </A><BR>
    <I>Mon Dec  4 19:40:09 UTC 2000</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001278.html">C++ Exception object layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1277">[ date ]</a>
              <a href="thread.html#1277">[ thread ]</a>
              <a href="subject.html#1277">[ subject ]</a>
              <a href="author.html#1277">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ravi,


I think the code example is correct. The text is misleading, but I think the
intent is that the second occurence of &quot;exception object&quot; in 2.2.1 refered
to the C++ object being thrown, as explained in a further paragraph in
2.2.1:

By convention, a __cxa_exception pointer points at the C++ object
representing the exception being thrown, immediately following the header.
The header structure is accessed at a negative offset from the
__cxa_exception pointer. This layout allows consistent treatment of
exception objects from different languages (or different implementations of
the same language), and allows future extensions of the header structure
while maintaining binary compatibility. 

To clarify, I propose we rephrase the initial paragraph from:

A C++ exception object consists of a header, which is a wrapper around an
unwind object header with additional C++ specific information, followed by
the exception object itself. The structure of the header is as follows: 

to:

A complete C++ exception object consists of a header, which is a wrapper
around an unwind object header with additional C++ specific information,
followed by the thrown C++ exception object itself. The structure of the
header is as follows: 

 

Regards

Christophe de Dinechin

 



&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">owner-cxx-abi at corp.sgi.com</A> [ mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">owner-cxx-abi at corp.sgi.com</A>
</I>&lt;mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">owner-cxx-abi at corp.sgi.com</A>&gt; ]On
&gt;<i> Behalf Of Narayanaswamy, Ravi
</I>&gt;<i> Sent: Thursday, November 30, 2000 10:09 AM
</I>&gt;<i> To: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">cxx-abi at baalbek.engr.sgi.com</A>
</I>&gt;<i> Subject: C++ Exception object layout
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In section 2.2.1 C++ Exception Objects,  the text part says
</I>&gt;<i> that the unwind
</I>&gt;<i> header
</I>&gt;<i> structure is followed by the exception object itself, where
</I>&gt;<i> as the layout
</I>&gt;<i> of the structure is just the opposite.  Can someone tell me
</I>&gt;<i> which is the
</I>&gt;<i> correct
</I>&gt;<i> one.
</I>&gt;<i> Below is part of the section.
</I>&gt;<i> Thanks
</I>&gt;<i> Ravi
</I>&gt;<i> Intel Corporation.
</I>&gt;<i>
</I>&gt;<i> 2.2.1 C++ Exception Objects
</I>&gt;<i> A C++ exception object consists of a header, which is a
</I>&gt;<i> wrapper around an
</I>&gt;<i> unwind object header with additional C++ specific
</I>&gt;<i> information, followed by
</I>&gt;<i> the exception object itself. The structure of the header is
</I>&gt;<i> as follows:
</I>&gt;<i>
</I>&gt;<i>   struct __cxa_exception {
</I>&gt;<i>       std::type_info *        exceptionType;
</I>&gt;<i>       void (*exceptionDestructor) (void *);
</I>&gt;<i>       unexpected_handler      unexpectedHandler;
</I>&gt;<i>       terminate_handler       terminateHandler;
</I>&gt;<i>       __cxa_exception *       nextException;
</I>&gt;<i>
</I>&gt;<i>       int                     handlerCount;
</I>&gt;<i>       int                     handlerSwitchValue;
</I>&gt;<i>       const char *            actionRecord;
</I>&gt;<i>       const char *            languageSpecificData;
</I>&gt;<i>       void *                  catchTemp;
</I>&gt;<i>       void *                  adjustedPtr;
</I>&gt;<i>
</I>&gt;<i>       _Unwind_Exception       unwindHeader;
</I>&gt;<i>    };
</I>&gt;<i>
</I>&gt;<i> 
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://sourcerytools.com/pipermail/cxx-abi-dev/attachments/20001204/8408a1ba/attachment.html">http://sourcerytools.com/pipermail/cxx-abi-dev/attachments/20001204/8408a1ba/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001278.html">C++ Exception object layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1277">[ date ]</a>
              <a href="thread.html#1277">[ thread ]</a>
              <a href="subject.html#1277">[ subject ]</a>
              <a href="author.html#1277">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
