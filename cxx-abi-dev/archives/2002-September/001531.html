<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> COMDAT group questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20COMDAT%20group%20questions&In-Reply-To=%3C5.1.0.14.1.20020906123308.03dcd920%40cam-pop.cambridge.arm.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>COMDAT group questions</H1>
    <B>scott douglass</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20COMDAT%20group%20questions&In-Reply-To=%3C5.1.0.14.1.20020906123308.03dcd920%40cam-pop.cambridge.arm.com%3E"
       TITLE="COMDAT group questions">sdouglass at arm.com
       </A><BR>
    <I>Fri Sep  6 11:59:18 UTC 2002</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001533.html">[cxx-abi-dev] COMDAT group questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1531">[ date ]</a>
              <a href="thread.html#1531">[ thread ]</a>
              <a href="subject.html#1531">[ subject ]</a>
              <a href="author.html#1531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

In section 5.2.2 Static Data the C++ ABI for Itanium (Draft) says:

&gt;<i>Inline functions, whether or not declared as such, and whether they are inline or out-of-line copies, may reference static data or character string literals, that must be kept in common among all copies by using the local symbol mangling defined above. These objects are named according to the rules for local names in the Scope Encoding section above, and the definition of each is emitted in a COMDAT group, identified by the symbol name described in the Scope Encoding section above. Each COMDAT group must be emitted in any object with references to the symbol for the object it contains, whether inline or out-of-line. 
</I>
Does &quot;the definition of each is emitted in a COMDAT group&quot; mean &quot;the definition of each is emitted in its own COMDAT group&quot;?  I think the rest of the paragraph implies this but I want to check that I'm not confused.

A related question:  What are all the cases in the ABI where COMDAT groups have more than one section in them?  I think the following is true:
  [] a vtable, its construction vtables (if any) and VTT (if any) are emitted in the same COMDAT group
  [] a static guard variable may be in the same COMDAT group as the static variable it is guarding or it can be alone
  [] all other COMDAT groups must contain just one section

Have I got that right?

Another:  What is the purpose of having the vtable, construction vtables and VTT in a single COMDAT group?  Is there some way in which problems could arise if the vtable, construction vtables and VTT were in separate COMDAT groups?  It seems like the vtable, construction vtables and VTT must be the identical in all translation units and from all compilers.  (Except the construction vtables names but they are only referred to from the VTT.)

Thanks.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001533.html">[cxx-abi-dev] COMDAT group questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1531">[ date ]</a>
              <a href="thread.html#1531">[ thread ]</a>
              <a href="subject.html#1531">[ subject ]</a>
              <a href="author.html#1531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
