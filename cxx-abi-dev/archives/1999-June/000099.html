<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> HP's object layout, clarification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20HP%27s%20object%20layout%2C%20clarification&In-Reply-To=%3C199906142217.PAA26264%40cllmail.cup.hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000098.html">
   <LINK REL="Next"  HREF="000100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>HP's object layout, clarification</H1>
    <B>Christophe de Dinechin</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20HP%27s%20object%20layout%2C%20clarification&In-Reply-To=%3C199906142217.PAA26264%40cllmail.cup.hp.com%3E"
       TITLE="HP's object layout, clarification">ddd at cup.hp.com
       </A><BR>
    <I>Mon Jun 14 22:17:03 UTC 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="000098.html">C++ standard library ABI
</A></li>
        <LI>Next message: <A HREF="000100.html">HP's object layout, clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#99">[ date ]</a>
              <a href="thread.html#99">[ thread ]</a>
              <a href="subject.html#99">[ subject ]</a>
              <a href="author.html#99">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Brian Thomson wrote:

&gt;<i> Cary, your object layout description makes this statement:
</I>&gt;<i>
</I>&gt;<i>     The C++ language allows an empty base-class to share
</I>&gt;<i>     its location with its descendents ...
</I>&gt;<i>     ... but also imposes the following INequalities:
</I>&gt;<i>
</I>&gt;<i>     (void*)&amp;empty != (void*)&amp;also_empty
</I>&gt;<i>     (void*)&amp;(Empty2&amp;)bug != (void*)&amp;(AlsoEmpty&amp;)bug
</I>&gt;<i>
</I>&gt;<i>     I.e., for two subobjects to have the same address,
</I>&gt;<i>     one must be derived from the other
</I>&gt;<i>
</I>&gt;<i> I see this asserted in section 10.0 of the spec for subobjects
</I>&gt;<i> &quot;that have the same class type&quot;, but not for subobjects in general. 
</I>&gt;<i> Do you have a supporting citation?
</I>&gt;<i>
</I>I think this is 5.10. [expr.eq], which says:

	Pointer to objects or functions of the same type
	(after pointer conversion) can be compared for
	equality. Two pointers of the same type compare
	equal if and only if they are both null, both point
	to the same object or function, or both point one
	past the end of the same array.

Since (void *) is the same type, you can do the comparison.
'empty' and 'also_empty' are not the same object. Similarly, the  
(Empty2) subobject of 'bug' and the (AlsoEmpty) subobject are not the  
same object. In both cases, this means that the equality above  
cannot be true.

What were described as possible equalities are when the objects are  
actually the same. Probably the wording above is not perfect (but,  
remember, this used to be an internal document). Rather than
	for two subobjects to have the same address,
	one must be derived from the other
you could have:
	for two pointers to compare equal,
	they must actually point to the same object.
(which implies the other, but the converse is not true)


Best regards
Christophe de Dinechin.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000098.html">C++ standard library ABI
</A></li>
	<LI>Next message: <A HREF="000100.html">HP's object layout, clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#99">[ date ]</a>
              <a href="thread.html#99">[ thread ]</a>
              <a href="subject.html#99">[ subject ]</a>
              <a href="author.html#99">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
