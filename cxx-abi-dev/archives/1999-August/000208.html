<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> vtable layout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20vtable%20layout&In-Reply-To=%3Cu9aerc9231.fsf%40yorick.cygnus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000207.html">
   <LINK REL="Next"  HREF="000213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>vtable layout</H1>
    <B>Jason Merrill</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20vtable%20layout&In-Reply-To=%3Cu9aerc9231.fsf%40yorick.cygnus.com%3E"
       TITLE="vtable layout">jason at cygnus.com
       </A><BR>
    <I>Sat Aug 28 00:32:50 UTC 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="000207.html">vtable layout
</A></li>
        <LI>Next message: <A HREF="000213.html">vtable layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#208">[ date ]</a>
              <a href="thread.html#208">[ thread ]</a>
              <a href="subject.html#208">[ subject ]</a>
              <a href="author.html#208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;&gt;&gt;<i> thomson  &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">thomson at ca.ibm.com</A>&gt; writes:
</I>
 &gt; Your statement of the rule would have us adding a slot to D's vtable,
 &gt; but in fact that is what we never do, because a D vtable never needs
 &gt; an &quot;adjust to D&quot; slot; instead we add slots to (some of) the secondary
 &gt; vtables in a D object.

It seemed simpler to me just to add the slot to D's vtable; since we know
the layout of the vtables, we can find it from any of the secondary vptrs.
But adding it to a secondary vtable from one of D's direct bases would also
work.

 &gt; And, as I described in an earlier note, the mechanism is totally different
 &gt; when B is a virtual base:  In that case, I believe we have to allocate a
 &gt; separate slot for each function in B, otherwise reconvergent (diamond)
 &gt; inheritance can introduce conflicts.

Hmm, yes.  Agreed.

 &gt; All of which leads me to remark ...

 &gt; This is an interesting problem and all, but I am not entirely
 &gt; comfortable with the amount of invention it involves.
 &gt; Standards activities usually try to avoid being so creative.

Fair enough.  But the existing solutions have significant drawbacks that
we'd like to avoid, and there are no backward compatibility concerns on a
new architecture.

 &gt; This work is on a promising path, but I believe we should represent
 &gt; it as an &quot;experimental ABI&quot; until it is proven by an implementation.

That would seem reasonable for the ABI as a whole.

Jason


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000207.html">vtable layout
</A></li>
	<LI>Next message: <A HREF="000213.html">vtable layout
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#208">[ date ]</a>
              <a href="thread.html#208">[ thread ]</a>
              <a href="subject.html#208">[ subject ]</a>
              <a href="author.html#208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
