<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] trivial __dynamic_cast fails?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20trivial%20__dynamic_cast%20fails%3F&In-Reply-To=%3Cuhdxcw394.fsf%40boost-consulting.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001822.html">
   <LINK REL="Next"  HREF="001823.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] trivial __dynamic_cast fails?</H1>
    <B>David Abrahams</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20trivial%20__dynamic_cast%20fails%3F&In-Reply-To=%3Cuhdxcw394.fsf%40boost-consulting.com%3E"
       TITLE="[cxx-abi-dev] trivial __dynamic_cast fails?">dave at boost-consulting.com
       </A><BR>
    <I>Fri Feb 27 22:45:27 UTC 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001822.html">[cxx-abi-dev] trivial __dynamic_cast fails?
</A></li>
        <LI>Next message: <A HREF="001823.html">[cxx-abi-dev] trivial __dynamic_cast fails?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1819">[ date ]</a>
              <a href="thread.html#1819">[ thread ]</a>
              <a href="subject.html#1819">[ subject ]</a>
              <a href="author.html#1819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Daveed Vandevoorde &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">daveed at edg.com</A>&gt; writes:

&gt;<i> On Feb 27, 2004, at 12:36 PM, Mark Mitchell wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> David Baraff wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm playing around with the __cxxabiv1::__dynamic_cast() function.  It
</I>&gt;&gt;&gt;<i> works as I would expect, with one exception.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The ABI document does not require that __dynamic_cast perform a
</I>&gt;&gt;<i> derived-to-base cast.  Those __dynamic_cast operations that can
</I>&gt;&gt;<i> actually be performed statically by the compiler must be performed
</I>&gt;&gt;<i> statically by the compiler -- the runtime library does not expect to
</I>&gt;&gt;<i> be called in that situation.
</I>&gt;<i>
</I>&gt;<i> Indeed.  However, it is not the first time I
</I>&gt;<i> encounter the desire to be able to do this
</I>&gt;<i> sort of thing.  
</I>
Yeah, I've been wishing for it for at least a year.  I had no idea
that there was a function lying around (even a platform-specific one)
that actually worked that way!  My application contains a big, nasty,
portable simulation of the same functionality.

&gt;<i> Since the ABI specs do not
</I>&gt;<i> currently say what __dynamic_cast should do
</I>&gt;<i> in the cases that the compiler handles alone,
</I>&gt;<i> I don't think there would be a significant
</I>&gt;<i> backward compatibility issue in trying to
</I>&gt;<i> support a useful design technique.  
</I>
Yes, I want the &quot;cast up the hierarchy&quot; capability also.

&gt;<i> If it
</I>&gt;<i> can be done within the framework of the
</I>&gt;<i> existing RTTI structures, I think it would
</I>&gt;<i> be worth &quot;upgrading&quot; __dynamic_cast to
</I>&gt;<i> address this.
</I>&gt;<i>
</I>&gt;<i> There has been occasional talk among WG21/
</I>&gt;<i> J16 actives about adding a facility like
</I>&gt;<i> what David B. is looking for, but so far
</I>&gt;<i> no concrete proposals.  I'm going to CC
</I>&gt;<i> David Abrahams who mentioned the desire
</I>&gt;<i> for this once.  Perhaps he has some insight
</I>&gt;<i> into how widespread the need for this is.
</I>
I think it's probably more widely neededthan you'd guess, at the
boundary between statically and dynamically-typed systems.  I doubt
anyone else has had the insanity to try to simulate it in conforming
code, or the wherewithal to express to implementors what they were
trying to achieve, so most people who might've needed it probably just
gave up.  That's a long-winded way of saying this is the first time
I've ever heard that someone else besides me wanted it.  If it's
(almost) in cxx abi v1, and David B. wants it, and I want it, it seems
like a few people at least have decided it's important.

-- 
Dave Abrahams
Boost Consulting
www.boost-consulting.com


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001822.html">[cxx-abi-dev] trivial __dynamic_cast fails?
</A></li>
	<LI>Next message: <A HREF="001823.html">[cxx-abi-dev] trivial __dynamic_cast fails?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1819">[ date ]</a>
              <a href="thread.html#1819">[ thread ]</a>
              <a href="subject.html#1819">[ subject ]</a>
              <a href="author.html#1819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
