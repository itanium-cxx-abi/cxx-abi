<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> A-25 Bitfields of greater than field size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20A-25%20Bitfields%20of%20greater%20than%20field%20size&In-Reply-To=%3Cu93dqs7f3e.fsf%40casey.cygnus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000578.html">
   <LINK REL="Next"  HREF="000559.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>A-25 Bitfields of greater than field size</H1>
    <B>Jason Merrill</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20A-25%20Bitfields%20of%20greater%20than%20field%20size&In-Reply-To=%3Cu93dqs7f3e.fsf%40casey.cygnus.com%3E"
       TITLE="A-25 Bitfields of greater than field size">jason at cygnus.com
       </A><BR>
    <I>Thu Feb 17 02:11:33 UTC 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="000578.html">A-25 Bitfields of greater than field size
</A></li>
        <LI>Next message: <A HREF="000559.html">Status page updates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#595">[ date ]</a>
              <a href="thread.html#595">[ thread ]</a>
              <a href="subject.html#595">[ subject ]</a>
              <a href="author.html#595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dehnert at baalbek.engr.sgi.com</A> (Jim Dehnert) writes:

&gt;<i> &gt; From: Jason Merrill &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">jason at cygnus.com</A>&gt;
</I>&gt;<i> &gt; Date: 10 Feb 2000 12:43:55 -0800
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; It seems to me that
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; struct A {
</I>&gt;<i> &gt;   ...
</I>&gt;<i> &gt;   signed char c: 32;
</I>&gt;<i> &gt;   ...
</I>&gt;<i> &gt; };
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; should be treated like
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; struct A {
</I>&gt;<i> &gt;   ...
</I>&gt;<i> &gt;   int i: 32;
</I>&gt;<i> &gt;   ...
</I>&gt;<i> &gt; };
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; except that only the low 8 bits are significant.  This should be true
</I>&gt;<i> &gt; whether or not there is actually a 32-bit type on the target.
</I>&gt;<i> 
</I>&gt;<i> In fact, I had been thinking that IF the primary purpose of this feature
</I>&gt;<i> is to allow known layout of (something like) an enum type without
</I>&gt;<i> knowing how big the compiler will make it, then Jason is right.
</I>&gt;<i> Specifically, the allocation of the field _with_ padding should be
</I>&gt;<i> based on the largest type that could fit in the specified size.
</I>&gt;<i> Where the real data goes (if there's a choice) doesn't much matter
</I>&gt;<i> then.  Lowest address would work (and lead to a consistent offset
</I>&gt;<i> and/or address).
</I>
Note that by &quot;low 8 bits&quot; I meant &quot;least significant 8 bits&quot;; the
position would depend on the endianness of the target.

In other words, you should be able to load the larger type and
truncate it to the smaller type to get the right answer.

Jason


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000578.html">A-25 Bitfields of greater than field size
</A></li>
	<LI>Next message: <A HREF="000559.html">Status page updates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#595">[ date ]</a>
              <a href="thread.html#595">[ thread ]</a>
              <a href="subject.html#595">[ subject ]</a>
              <a href="author.html#595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
