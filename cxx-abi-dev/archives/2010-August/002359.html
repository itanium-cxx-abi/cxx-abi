<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] Clarification on floating point literal mangling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Clarification%20on%20floating%20point%20literal%20mangling&In-Reply-To=%3C201008040535.WAA14683%40hpcll183.cup.hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002358.html">
   <LINK REL="Next"  HREF="002360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] Clarification on floating point literal mangling</H1>
    <B>Dennis Handly</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Clarification%20on%20floating%20point%20literal%20mangling&In-Reply-To=%3C201008040535.WAA14683%40hpcll183.cup.hp.com%3E"
       TITLE="[cxx-abi-dev] Clarification on floating point literal mangling">dhandly at cup.hp.com
       </A><BR>
    <I>Wed Aug  4 05:35:48 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002358.html">[cxx-abi-dev] Clarification on floating point literal mangling
</A></li>
        <LI>Next message: <A HREF="002360.html">Demangling ambiguity for templated conversion operators
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2359">[ date ]</a>
              <a href="thread.html#2359">[ thread ]</a>
              <a href="subject.html#2359">[ subject ]</a>
              <a href="author.html#2359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From: Mike Herrick &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">mjh at edg.com</A>&gt;
</I>&gt;<i>We recently ran across this seeming inconsistency with the description
</I>&gt;<i>of mangling for floating point literals.  The current wording calls for
</I>&gt;<i>both &quot;fixed-length&quot; and &quot;without leading zeroes&quot;.  We think the &quot;without
</I>&gt;<i>leading zeroes&quot; portion should be removed to match existing practice:
</I>
(Please ignore my previous reply, I didn't see this message first.)

And it seems to be contradictory.  (And &quot;leading zero nibbles&quot; would be better
wording.)
And in practice, there won't be many leading zero nibbles except for very
small numbers:
float  small zero nibble: 2.524355e-29
double small zero nibble: 1.288230e-231

(Of course if you assumed the numbers were distributed uniformly as bit
patterns, 1/16 of all floats would have at least one leading zero nibble.  :-)

Do we have something similar for Decimal floating point mangling?
Also do we care that there are two internal representation for Dec FP?
BID and DPD.

Do we expect that one compiler will want to have both at the same time?
Or just the natural one and the other is an opague type?
(HP plans to use BID and the other is a user defined opague type.)

And speaking of multiple types for decimal, if a compiler supports N
different binary floating point encodings, we have L x nibble-stream E, where
&quot;x&quot; can be the vendor defined type for alternate float formats?

I suppose this isn't important, if the compiler can only support one type
at the same time and just uses &quot;f&quot; for the float type.

*** abi.orig.html       Mon Aug  2 08:34:44 2010
  Floating-point literals are encoded using a fixed-length lowercase
  hexadecimal string corresponding to the internal representation (IEEE
! on Itanium), high-order bytes first, without leading zeroes.  For
  example: &quot;Lf bf800000 E&quot; is -1.0f on Itanium.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002358.html">[cxx-abi-dev] Clarification on floating point literal mangling
</A></li>
	<LI>Next message: <A HREF="002360.html">Demangling ambiguity for templated conversion operators
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2359">[ date ]</a>
              <a href="thread.html#2359">[ thread ]</a>
              <a href="subject.html#2359">[ subject ]</a>
              <a href="author.html#2359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
