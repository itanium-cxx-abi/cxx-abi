<tt>
&lt;html&gt;&lt;body&gt;<br>
&lt;p&gt;The&nbsp;C&nbsp;linkage&nbsp;would&nbsp;be&nbsp;a&nbsp;problem&nbsp;on&nbsp;platforms&nbsp;that&nbsp;use&nbsp;a&nbsp;different&nbsp;calling.&nbsp;&nbsp;The&nbsp;compiler&nbsp;is&nbsp;going&nbsp;to&nbsp;generate&nbsp;code&nbsp;that&nbsp;assumes&nbsp;the&nbsp;functions&nbsp;pointed&nbsp;to&nbsp;by&nbsp;the&nbsp;virtual&nbsp;function&nbsp;table&nbsp;have&nbsp;C++&nbsp;linkage.&nbsp;&nbsp;These&nbsp;functions&nbsp;should&nbsp;have&nbsp;C++&nbsp;linkage&nbsp;too.&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Sean&nbsp;Perry&lt;br&gt;<br>
Compiler&nbsp;Development&lt;br&gt;<br>
IBM&nbsp;Canada&nbsp;Lab&lt;br&gt;<br>
(905)-413-6031&nbsp;(tie&nbsp;313-6031),&nbsp;fax&nbsp;(905)-413-4839&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;img&nbsp;width=&quot;16&quot;&nbsp;height=&quot;16&quot;&nbsp;src=&quot;cid:1__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;Inactive&nbsp;hide&nbsp;details&nbsp;for&nbsp;Dennis&nbsp;Handly&nbsp;&lt;dhandly@cup.hp.com&gt;&quot;&gt;Dennis&nbsp;Handly&nbsp;&lt;dhandly@cup.hp.com&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;style=&quot;background-image:url(cid:2__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com);&nbsp;background-repeat:&nbsp;no-repeat;&nbsp;&quot;&nbsp;width=&quot;40%&quot;&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;&lt;b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Dennis&nbsp;Handly&nbsp;&lt;dhandly@cup.hp.com&gt;&lt;/font&gt;&lt;/b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&nbsp;&lt;/font&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;05/28/2009&nbsp;10:07&nbsp;PM&lt;/font&gt;&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/td&gt;&lt;td&nbsp;width=&quot;60%&quot;&gt;<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;To&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;jason@redhat.com,&nbsp;mark@codesourcery.com&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;cc&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;cxx-abi-dev@codesourcery.com,&nbsp;daveed@edg.com&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Subject&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;Re:&nbsp;[cxx-abi-dev]&nbsp;Deleted&nbsp;virtual&nbsp;functions&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
<br>
&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;58&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;336&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF56DFC106858f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;tt&gt;Looks&nbsp;good.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;From:&nbsp;David&nbsp;Vandevoorde&nbsp;&lt;daveed@edg.com&gt;&lt;br&gt;<br>
&gt;I&nbsp;noticed&nbsp;that&nbsp;there&nbsp;isn't&nbsp;actually&nbsp;a&nbsp;requirement&nbsp;to&nbsp;point&nbsp;virtual&nbsp;&nbsp;&lt;br&gt;<br>
&gt;table&nbsp;entried&nbsp;for&nbsp;pure&nbsp;virtual&nbsp;functions&nbsp;at&nbsp;__cxa_pure_virtual.&nbsp;&nbsp;Is&nbsp;&nbsp;&lt;br&gt;<br>
&gt;that&nbsp;intentional&nbsp;or&nbsp;just&nbsp;sloppy&nbsp;wording?&lt;br&gt;<br>
&lt;br&gt;<br>
Well,&nbsp;why&nbsp;have&nbsp;__cxa_pure_virtual&nbsp;without&nbsp;using&nbsp;it?&nbsp;&nbsp;;-)&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;suggestion&nbsp;for&nbsp;the&nbsp;signature&nbsp;for&nbsp;__cxa_pure_virtual&nbsp;and&nbsp;the&nbsp;new&lt;br&gt;<br>
__cxa_deleted_virtual:&lt;br&gt;<br>
&lt;br&gt;<br>
extern&nbsp;&quot;C&quot;&nbsp;void&nbsp;__cxa_deleted_virtual(void&nbsp;*this_ptr);&lt;br&gt;<br>
extern&nbsp;&quot;C&quot;&nbsp;void&nbsp;__cxa_pure_virtual(void&nbsp;*this_ptr);&lt;br&gt;<br>
&lt;br&gt;<br>
Where&nbsp;this_ptr&nbsp;can&nbsp;be&nbsp;cast&nbsp;to&nbsp;a&nbsp;dummy&nbsp;polymorphic&nbsp;class&nbsp;to&nbsp;get&nbsp;the&nbsp;class&lt;br&gt;<br>
name&nbsp;to&nbsp;print&nbsp;a&nbsp;nicer&nbsp;message:&lt;br&gt;<br>
&lt;br&gt;<br>
//&nbsp;A&nbsp;dummy&nbsp;polymorphic&nbsp;class&nbsp;to&nbsp;make&nbsp;typeid()&nbsp;do&nbsp;the&nbsp;work&nbsp;below.&lt;br&gt;<br>
class&nbsp;pv_dummy&nbsp;{&lt;br&gt;<br>
public:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;virtual&nbsp;void&nbsp;dummy_func();&lt;br&gt;<br>
};&lt;br&gt;<br>
extern&nbsp;&quot;C&quot;&nbsp;{&lt;br&gt;<br>
extern&nbsp;void&nbsp;abort();&lt;br&gt;<br>
void&nbsp;__cxa_pure_virtual&nbsp;(void&nbsp;*this_ptr)&lt;br&gt;<br>
{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;pv_dummy&nbsp;*obj&nbsp;=&nbsp;(pv_dummy*)this_ptr;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*mangled_name&nbsp;=&nbsp;typeid(*obj).name();&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*demangled_name&nbsp;=&nbsp;abi::__cxa_demangle(mangled_name,&nbsp;0,&nbsp;0,&nbsp;0);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!demangled_name)&nbsp;&nbsp;//&nbsp;out&nbsp;of&nbsp;space?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;demangled_name&nbsp;=&nbsp;mangled_name;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;&quot;aCC&nbsp;runtime:&nbsp;pure&nbsp;virtual&nbsp;function&nbsp;called&nbsp;for&nbsp;class&nbsp;\&quot;%s\&quot;.&lt;br&gt;<br>
\n&quot;,&nbsp;demangled_name);&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;abort();&lt;br&gt;<br>
}&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
--Apple-Mail-17--1051914877&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename=deleted_funcs.diffs&lt;br&gt;<br>
+&nbsp;&lt;li&gt;If&nbsp;C::f&nbsp;is&nbsp;a&nbsp;pure&nbsp;virtual&nbsp;function,&nbsp;the&nbsp;corresponding&nbsp;virtual&nbsp;table&lt;br&gt;<br>
+&nbsp;entry&nbsp;may&nbsp;point&nbsp;to&nbsp;__cxa_pure_virtual&lt;br&gt;<br>
&lt;br&gt;<br>
Did&nbsp;you&nbsp;want&nbsp;to&nbsp;explain&nbsp;why&nbsp;you&nbsp;used&nbsp;&quot;may&quot;?&lt;br&gt;<br>
Is&nbsp;this&nbsp;the&nbsp;case&nbsp;of&nbsp;declaring&nbsp;it&nbsp;pure&nbsp;but&nbsp;still&nbsp;having&nbsp;a&nbsp;definition?&lt;br&gt;<br>
(for&nbsp;the&nbsp;destructor)&lt;br&gt;<br>
&lt;/tt&gt;&lt;br&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
