<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;23,&nbsp;2013&nbsp;at&nbsp;10:41&nbsp;PM,&nbsp;John&nbsp;McCall&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;May&nbsp;23,&nbsp;2013,&nbsp;at&nbsp;10:23&nbsp;PM,&nbsp;Richard&nbsp;Smith&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:richardsmith@google.com&quot;&gt;richardsmith@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&gt;&nbsp;So...&nbsp;this&nbsp;problem&nbsp;was&nbsp;not&nbsp;really&nbsp;new&nbsp;in&nbsp;C++11.&nbsp;In&nbsp;C++98&nbsp;it&nbsp;can&nbsp;be&nbsp;witnessed&nbsp;for&nbsp;an&nbsp;inline&nbsp;function&nbsp;such&nbsp;as:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;inline&nbsp;const&nbsp;char&nbsp;*get()&nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*str&nbsp;=&nbsp;&quot;foo&quot;;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;return&nbsp;str;&lt;br&gt;<br>
&gt;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;How&nbsp;is&nbsp;this&nbsp;different&nbsp;from&nbsp;the&nbsp;following?&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;inline&nbsp;const&nbsp;char&nbsp;*get_nostatic()&nbsp;{&nbsp;return&nbsp;&quot;foo&quot;;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
or&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;inline&nbsp;const&nbsp;char&nbsp;*get_separate()&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp;const&nbsp;char&nbsp;*temp&nbsp;=&nbsp;&quot;foo&quot;;&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*str&nbsp;=&nbsp;tmp;&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;str;&lt;br&gt;<br>
 &nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;find&nbsp;or&nbsp;add&nbsp;something&nbsp;in&nbsp;the&nbsp;standard&nbsp;which&nbsp;will&nbsp;allow&nbsp;us&nbsp;to&lt;br&gt;<br>
not&nbsp;export&nbsp;a&nbsp;symbol&nbsp;for&nbsp;every&nbsp;string&nbsp;literal(*)&nbsp;that&nbsp;happens&nbsp;to&nbsp;be&nbsp;used&lt;br&gt;<br>
in&nbsp;a&nbsp;function&nbsp;with&nbsp;weak&nbsp;linkage.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Finding&nbsp;failed.&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;implications&nbsp;of&nbsp;the&nbsp;ODR,&nbsp;we&nbsp;have&nbsp;this:&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;[dcl.fct.spec]p4:&nbsp;&quot;A&nbsp;string&nbsp;literal&nbsp;in&nbsp;the&nbsp;body&nbsp;of&nbsp;an&nbsp;extern&nbsp;inline&nbsp;function&nbsp;is&nbsp;the&nbsp;same&nbsp;object&nbsp;in&nbsp;different&nbsp;translation&nbsp;units.&quot;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;On&nbsp;the&nbsp;adding&nbsp;front,&nbsp;perhaps&nbsp;the&nbsp;simplest&nbsp;way&nbsp;to&nbsp;avoid&nbsp;generating&nbsp;such&nbsp;extra&nbsp;symbols&nbsp;(at&nbsp;least,&nbsp;in&nbsp;most&nbsp;cases)&nbsp;would&nbsp;be&nbsp;to&nbsp;specify&nbsp;that&nbsp;a&nbsp;string&nbsp;literal&nbsp;expression&nbsp;may&nbsp;produce&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;different&nbsp;(static&nbsp;storage&nbsp;duration)&nbsp;object&nbsp;each&nbsp;time&nbsp;it&nbsp;is&nbsp;evaluated.&nbsp; However,&nbsp;even&nbsp;if&nbsp;we&nbsp;allow&nbsp;that,&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&#39;s&nbsp;reasonable&nbsp;for&nbsp;an&nbsp;unchanging&nbsp;static&nbsp;storage&nbsp;duration&nbsp;pointer&nbsp;or&nbsp;reference&nbsp;to&nbsp;point&nbsp;at&nbsp;different&nbsp;objects&nbsp;depending&nbsp;on&nbsp;who&nbsp;is&nbsp;asking.&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
