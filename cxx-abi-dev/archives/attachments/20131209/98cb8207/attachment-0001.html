<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi!&lt;div&gt;&lt;br&gt;&lt;/div&gt;5.1.2&nbsp;says:&nbsp;&quot;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;mangling,&nbsp;the&nbsp;name&nbsp;of&nbsp;an&nbsp;anonymous&nbsp;union&nbsp;is&nbsp;considered&nbsp;to&nbsp;be&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;first&nbsp;named&nbsp;data&nbsp;member&nbsp;found&nbsp;by&nbsp;a&nbsp;pre-order,&nbsp;depth-first,&nbsp;declaration-order&nbsp;walk&nbsp;of&nbsp;the&nbsp;data&nbsp;members&nbsp;of&nbsp;the&nbsp;anonymous&nbsp;union.&quot;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;5.1.6&nbsp;says:&nbsp;&quot;In&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;local&nbsp;types&nbsp;(excluding&nbsp;unnamed&nbsp;types&nbsp;that&nbsp;have&nbsp;acquired&nbsp;a&nbsp;&quot;name&nbsp;for&nbsp;linkage&nbsp;purposes&quot;),&nbsp;the&nbsp;&quot;name&quot;&nbsp;the&nbsp;unqualified&nbsp;name&nbsp;is&nbsp;encoded&nbsp;as&nbsp;an&nbsp;&lt;unnamed-type-name&gt;&quot;&lt;br&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thus,&nbsp;given:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;struct&nbsp;A&nbsp;{&nbsp;union&nbsp;{&nbsp;int&nbsp;n;&nbsp;};&nbsp;struct&nbsp;{}&nbsp;x;&nbsp;};&lt;/div&gt;&lt;div&gt;template&lt;int&nbsp;A::*&gt;&nbsp;struct&nbsp;X&nbsp;{};&lt;/div&gt;&lt;div&gt;void&nbsp;f(X&lt;&amp;A::n&gt;,&nbsp;decltype(A::x))&nbsp;{}&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;...&nbsp;the&nbsp;mangling&nbsp;of&nbsp;&#39;f&#39;&nbsp;is _Z1f1XIXadL_ZN1A1n1nEEEENS0_Ut_E&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;I&nbsp;can&#39;t&nbsp;find&nbsp;any&nbsp;implementation&nbsp;that&nbsp;actually&nbsp;follows&nbsp;these&nbsp;rules.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Clang&nbsp;and&nbsp;GCC&nbsp;give&nbsp;the&nbsp;anonymous&nbsp;union&nbsp;an&nbsp;unnamed&nbsp;type&nbsp;mangling&nbsp;instead&nbsp;of&nbsp;an&nbsp;anonymous&nbsp;union&nbsp;mangling,&nbsp;and&nbsp;give _Z1f1XIXadL_ZN1AUt_1nEEEENS0_Ut0_E&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;EDG&nbsp;follows&nbsp;the&nbsp;5.1.6&nbsp;rule&nbsp;but&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;implement&nbsp;the&nbsp;5.1.2&nbsp;rule,&nbsp;and&nbsp;instead&nbsp;gives _Z1f1XIXadL_ZN1A4__C11nEEEENS0_Ut_E&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&#39;s&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;special&nbsp;case&nbsp;in&nbsp;5.1.2&nbsp;and&nbsp;5.1.6?&nbsp;The&nbsp;rules&nbsp;would&nbsp;be&nbsp;simpler&nbsp;and&nbsp;more&nbsp;uniform&nbsp;if&nbsp;we&nbsp;adopted&nbsp;the&nbsp;Clang&nbsp;and&nbsp;GCC&nbsp;behavior,&nbsp;and&nbsp;we&nbsp;don&#39;t&nbsp;seem&nbsp;to&nbsp;lose&nbsp;much&nbsp;by&nbsp;doing&nbsp;so.&nbsp;Thoughts?&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
