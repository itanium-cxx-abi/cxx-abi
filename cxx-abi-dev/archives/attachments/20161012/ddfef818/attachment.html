<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Oct&nbsp;12,&nbsp;2016,&nbsp;at&nbsp;4:51&nbsp;PM,&nbsp;John&nbsp;McCall&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;class=&quot;&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;/blockquote&gt;[…]&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I'll&nbsp;admit&nbsp;that&nbsp;I&nbsp;don't&nbsp;attend&nbsp;committee&nbsp;meetings,&nbsp;but&nbsp;I&nbsp;thought&nbsp;that&nbsp;implementation&nbsp;experience&nbsp;was&nbsp;expected&nbsp;*prior*&nbsp;to&nbsp;standardization,&nbsp;not&nbsp;something&nbsp;that&nbsp;gets&nbsp;done&nbsp;months&nbsp;after&nbsp;voting&nbsp;the&nbsp;thing&nbsp;in&nbsp;concurrently&nbsp;with&nbsp;the&nbsp;committee&nbsp;finalizing&nbsp;the&nbsp;language&nbsp;in&nbsp;a&nbsp;draft&nbsp;for&nbsp;next&nbsp;year's&nbsp;release.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;That’s&nbsp;cute&nbsp;;-)&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;You&nbsp;will&nbsp;note&nbsp;that&nbsp;I&nbsp;have&nbsp;omitted&nbsp;the&nbsp;necessary&nbsp;specializations&nbsp;for&nbsp;&quot;transaction_safe&quot;,&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;incredibly&nbsp;common&nbsp;extension&nbsp;of&nbsp;specialized&nbsp;calling&nbsp;conventions.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;This&nbsp;also&nbsp;breaks&nbsp;source&nbsp;compatibility&nbsp;for&nbsp;template&nbsp;matching,&nbsp;and&nbsp;basically&nbsp;every&nbsp;function&nbsp;template&nbsp;in&nbsp;the&nbsp;standard&nbsp;library&nbsp;is&nbsp;going&nbsp;to&nbsp;change&nbsp;manglings&nbsp;(and&nbsp;become&nbsp;*much*&nbsp;larger)&nbsp;due&nbsp;to&nbsp;noexcept&nbsp;expressions&nbsp;now&nbsp;being&nbsp;mangled.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;It's&nbsp;a&nbsp;problem,&nbsp;but&nbsp;I&nbsp;don't&nbsp;think&nbsp;it's&nbsp;as&nbsp;bad&nbsp;as&nbsp;you&nbsp;claim.&nbsp;The&nbsp;mangling&nbsp;of&nbsp;a&nbsp;function&nbsp;still&nbsp;wouldn't&nbsp;include&nbsp;its&nbsp;exception&nbsp;specification;&nbsp;this&nbsp;would&nbsp;only&nbsp;affect&nbsp;mangling&nbsp;in&nbsp;cases&nbsp;where&nbsp;a&nbsp;parameter&nbsp;or&nbsp;return&nbsp;type&nbsp;or&nbsp;template&nbsp;argument&nbsp;involves&nbsp;a&nbsp;function&nbsp;type&nbsp;with&nbsp;an&nbsp;exception-specification&nbsp;--&nbsp;a&nbsp;lot&nbsp;less&nbsp;common&nbsp;than&nbsp;every&nbsp;function&nbsp;template&nbsp;in&nbsp;the&nbsp;standard&nbsp;library,&nbsp;but&nbsp;this&nbsp;still&nbsp;does&nbsp;change&nbsp;manglings&nbsp;for&nbsp;existing&nbsp;code.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/span&gt;Okay,&nbsp;so&nbsp;it&nbsp;only&nbsp;triggers&nbsp;SFINAE&nbsp;failures&nbsp;in&nbsp;nested&nbsp;function&nbsp;types,&nbsp;and&nbsp;you&nbsp;can't&nbsp;overload&nbsp;templates&nbsp;by&nbsp;it?&nbsp;&nbsp;I&nbsp;agree&nbsp;that&nbsp;that&nbsp;helps&nbsp;a&nbsp;lot.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;And&nbsp;the&nbsp;entire&nbsp;proposal&nbsp;seems&nbsp;to&nbsp;have&nbsp;forgotten&nbsp;about&nbsp;reference-to-function&nbsp;types.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;change&nbsp;to&nbsp;[dcl.init.ref]p4&nbsp;allows&nbsp;a&nbsp;reference&nbsp;to&nbsp;non-noexcept&nbsp;function&nbsp;to&nbsp;bind&nbsp;to&nbsp;a&nbsp;noexcept&nbsp;function,&nbsp;and&nbsp;this&nbsp;indirectly&nbsp;allows&nbsp;the&nbsp;same&nbsp;during&nbsp;overload&nbsp;resolution,&nbsp;casts,&nbsp;and&nbsp;so&nbsp;on.&nbsp;What&nbsp;additional&nbsp;considerations&nbsp;were&nbsp;missed?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/span&gt;I&nbsp;hadn't&nbsp;realized&nbsp;that&nbsp;the&nbsp;expression&nbsp;logic&nbsp;was&nbsp;so&nbsp;consistent&nbsp;about&nbsp;defining&nbsp;e.g.&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;conditional&nbsp;operator&nbsp;on&nbsp;l-values&nbsp;in&nbsp;terms&nbsp;of&nbsp;reference&nbsp;binding.&nbsp;&nbsp;I&nbsp;apologize.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;...I&nbsp;see&nbsp;that&nbsp;this&nbsp;adds&nbsp;a&nbsp;new&nbsp;special&nbsp;case&nbsp;to&nbsp;exception&nbsp;handling.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Yes;&nbsp;I'd&nbsp;forgotten&nbsp;to&nbsp;mention&nbsp;this&nbsp;side&nbsp;of&nbsp;the&nbsp;ABI&nbsp;change.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;We'll&nbsp;also&nbsp;need&nbsp;a&nbsp;new&nbsp;flag&nbsp;on&nbsp;type_info&nbsp;objects&nbsp;to&nbsp;model&nbsp;this.&nbsp;In&nbsp;line&nbsp;with&nbsp;the&nbsp;transaction_safe&nbsp;changes&nbsp;that&nbsp;Jason&nbsp;proposed,&nbsp;I&nbsp;suggest&nbsp;adding&nbsp;a&nbsp;__noexcept_mask&nbsp;=&nbsp;0x40&nbsp;to&nbsp;__pbase_type_info,&nbsp;and&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;noexcept&nbsp;function&nbsp;as&nbsp;a&nbsp;pointer&nbsp;with&nbsp;__noexcept_mask&nbsp;bit&nbsp;set&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;*non-noexcept*&nbsp;function&nbsp;pointer&nbsp;type.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;I&nbsp;strongly&nbsp;disagree;&nbsp;we&nbsp;should&nbsp;take&nbsp;this&nbsp;opportunity&nbsp;to&nbsp;revisit&nbsp;that&nbsp;decision.&nbsp;&nbsp;The&nbsp;floodgates&nbsp;are&nbsp;open,&nbsp;and&nbsp;this&nbsp;set&nbsp;of&nbsp;function&nbsp;type&nbsp;attributes&nbsp;is&nbsp;clearly&nbsp;going&nbsp;to&nbsp;grow&nbsp;over&nbsp;time.&nbsp;&nbsp;(It's&nbsp;actually&nbsp;transaction_safe&nbsp;that&nbsp;really&nbsp;drives&nbsp;this&nbsp;point&nbsp;home;&nbsp;noexcept&nbsp;is&nbsp;at&nbsp;least&nbsp;a&nbsp;longstanding&nbsp;part&nbsp;of&nbsp;the&nbsp;core&nbsp;language&nbsp;in&nbsp;various&nbsp;forms.)&nbsp;&nbsp;We&nbsp;also&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;vendor-specific&nbsp;function&nbsp;type&nbsp;attributes&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the&nbsp;type&nbsp;but&nbsp;just&nbsp;aren't&nbsp;standardized&nbsp;and&nbsp;can't&nbsp;be&nbsp;represented&nbsp;in&nbsp;type_info.&nbsp;&nbsp;I&nbsp;don't&nbsp;think&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;indefinitely&nbsp;keep&nbsp;hacking&nbsp;these&nbsp;things&nbsp;into&nbsp;the&nbsp;pointer&nbsp;type&nbsp;flags;&nbsp;we&nbsp;should&nbsp;just&nbsp;bite&nbsp;the&nbsp;bullet&nbsp;and&nbsp;create&nbsp;a&nbsp;new&nbsp;function_type_info&nbsp;subclass.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;with&nbsp;you&nbsp;(John).&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;(That&nbsp;said,&nbsp;I’ll&nbsp;keep&nbsp;resisting&nbsp;adding&nbsp;standard&nbsp;bifurcations&nbsp;to&nbsp;function&nbsp;types.&nbsp;“contracts”&nbsp;and&nbsp;one&nbsp;alternative&nbsp;for&nbsp;coroutines&nbsp;are&nbsp;currently&nbsp;trying&nbsp;to&nbsp;add&nbsp;to&nbsp;that&nbsp;list.)&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;Daveed&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
