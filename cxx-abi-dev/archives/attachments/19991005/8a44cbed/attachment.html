<tt>
&lt;HTML&gt;<br>
<br>
&lt;HEAD&gt;<br>
&lt;title&gt;SGI&nbsp;gABI&nbsp;Proposal&nbsp;7x:&nbsp;Section&nbsp;Indices&lt;/title&gt;<br>
<br>
&lt;hr&gt;<br>
<br>
&lt;font&nbsp;size=6&gt;&lt;i&gt;&lt;b&gt;<br>
&lt;p&gt;<br>
SGI&nbsp;gABI&nbsp;Proposal&nbsp;7x:<br>
&lt;br&gt;<br>
Section&nbsp;Indices<br>
&lt;/b&gt;&lt;/i&gt;&lt;/font&gt;<br>
&lt;p&gt;<br>
&lt;i&gt;Revised&nbsp;5&nbsp;October&nbsp;1999&lt;/i&gt;<br>
<br>
&lt;/center&gt;<br>
<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;TEXT=&quot;#000000&quot;&nbsp;LINK=&quot;#0000EE&quot;&nbsp;VLINK=&quot;#551A8B&quot;&nbsp;ALINK=&quot;#FF0000&quot;&gt;<br>
&lt;font&nbsp;size=-1&gt;<br>
<br>
&lt;p&gt;<br>
&lt;hr&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h3&gt;&nbsp;Revisions&nbsp;and&nbsp;Status&nbsp;&lt;/h3&gt;<br>
<br>
&lt;p&gt;<br>
[991005&nbsp;SGI]<br>
Initial&nbsp;version.<br>
<br>
&lt;p&gt;<br>
&lt;h3&gt;&nbsp;Background&nbsp;&lt;/h3&gt;<br>
<br>
&lt;p&gt;<br>
SGI&nbsp;has&nbsp;long&nbsp;been&nbsp;concerned&nbsp;about&nbsp;the&nbsp;64K&nbsp;limitation&nbsp;on&nbsp;the&nbsp;number&nbsp;of<br>
sections&nbsp;in&nbsp;an&nbsp;object&nbsp;file.<br>
Although&nbsp;this&nbsp;need&nbsp;not&nbsp;normally&nbsp;be&nbsp;a&nbsp;problem,<br>
there&nbsp;are&nbsp;purposes&nbsp;for&nbsp;which&nbsp;we&nbsp;would&nbsp;like&nbsp;to&nbsp;place&nbsp;distinct&nbsp;functions,<br>
and&nbsp;sometimes&nbsp;data&nbsp;items,<br>
in&nbsp;distinct&nbsp;sections.<br>
When&nbsp;one&nbsp;takes&nbsp;into&nbsp;account&nbsp;associated&nbsp;sections,<br>
e.g.&nbsp;relocation,&nbsp;debug&nbsp;information,&nbsp;etc.,<br>
this&nbsp;leads&nbsp;to&nbsp;a&nbsp;limitation&nbsp;on&nbsp;the&nbsp;order&nbsp;of&nbsp;16K&nbsp;units,<br>
and&nbsp;threatens&nbsp;to&nbsp;be&nbsp;a&nbsp;problem&nbsp;for&nbsp;some&nbsp;large&nbsp;compilation&nbsp;units&nbsp;such&nbsp;as<br>
machine-generated&nbsp;simulators.<br>
<br>
&lt;p&gt;<br>
C++&nbsp;ABI&nbsp;efforts&nbsp;raise&nbsp;the&nbsp;same&nbsp;issue&nbsp;from&nbsp;another&nbsp;source.<br>
Various&nbsp;C++&nbsp;structures&nbsp;are&nbsp;emitted&nbsp;under&nbsp;circumstances<br>
where&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;reliably&nbsp;identify&nbsp;a&nbsp;single&nbsp;compilation&nbsp;unit<br>
in&nbsp;which&nbsp;to&nbsp;emit&nbsp;them.<br>
Examples&nbsp;include&nbsp;common&nbsp;cases&nbsp;like&nbsp;class&nbsp;virtual&nbsp;tables,<br>
out-of-line&nbsp;copies&nbsp;of&nbsp;inline&nbsp;functions,<br>
and&nbsp;template&nbsp;instantiations.<br>
The&nbsp;favored&nbsp;solution&nbsp;is&nbsp;COMDAT&nbsp;sections,<br>
i.e.&nbsp;putting&nbsp;the&nbsp;potentially&nbsp;duplicated&nbsp;items&nbsp;in&nbsp;their&nbsp;own&nbsp;sections,<br>
and&nbsp;allowing&nbsp;the&nbsp;linker&nbsp;to&nbsp;remove&nbsp;the&nbsp;duplicates.<br>
Once&nbsp;again,&nbsp;though,&nbsp;this&nbsp;threatens&nbsp;to&nbsp;be&nbsp;a&nbsp;problem&nbsp;for&nbsp;very&nbsp;large<br>
compilation&nbsp;units.<br>
<br>
&lt;p&gt;<br>
The&nbsp;following&nbsp;proposal&nbsp;attempts&nbsp;to&nbsp;remove&nbsp;this&nbsp;limitation.<br>
Obviously,&nbsp;even&nbsp;if&nbsp;the&nbsp;problem&nbsp;is&nbsp;real,<br>
it&nbsp;will&nbsp;actually&nbsp;arise&nbsp;in&nbsp;very&nbsp;few&nbsp;compilation&nbsp;units.<br>
Therefore,&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;proposed&nbsp;solution&nbsp;are&nbsp;defined&nbsp;so&nbsp;as&nbsp;to<br>
leave&nbsp;unchanged&nbsp;object&nbsp;files&nbsp;which&nbsp;do&nbsp;not&nbsp;encounter&nbsp;the&nbsp;problem.<br>
We&nbsp;consider&nbsp;this&nbsp;compatibility&nbsp;objective&nbsp;as&nbsp;primary&nbsp;--<br>
much&nbsp;more&nbsp;important&nbsp;than&nbsp;performance&nbsp;or<br>
clean&nbsp;definitions&nbsp;for&nbsp;the&nbsp;problematic&nbsp;object&nbsp;files&nbsp;--<br>
particularly&nbsp;as&nbsp;it&nbsp;should&nbsp;allow&nbsp;vendors&nbsp;to&nbsp;merge&nbsp;the&nbsp;solution&nbsp;into<br>
existing&nbsp;tool&nbsp;chains&nbsp;at&nbsp;convenient&nbsp;times&nbsp;without&nbsp;disrupting&nbsp;existing<br>
programs.<br>
<br>
&lt;p&gt;<br>
Proposed&nbsp;ABI&nbsp;wording&nbsp;is&nbsp;in&nbsp;normal&nbsp;font;&nbsp;commentary&nbsp;is&nbsp;in&nbsp;italics.<br>
Section&nbsp;numbers&nbsp;are&nbsp;from&nbsp;the&nbsp;Intel&nbsp;IA-64&nbsp;psABI.<br>
<br>
&lt;p&gt;<br>
&lt;hr&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h3&gt;&nbsp;Proposed&nbsp;gABI&nbsp;Changes&nbsp;&lt;/h3&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h4&gt;&nbsp;General&nbsp;Approach&nbsp;&lt;/h4&gt;<br>
&lt;i&gt;<br>
<br>
&lt;p&gt;<br>
The&nbsp;range&nbsp;of&nbsp;section&nbsp;indices&nbsp;from&nbsp;0xff00&nbsp;(SHN_LORESERVE)&nbsp;to<br>
0xffff&nbsp;(SHN_HIRESERVE)&nbsp;is&nbsp;reserved&nbsp;for&nbsp;special&nbsp;purposes,<br>
and&nbsp;the&nbsp;gABI&nbsp;already&nbsp;forbids&nbsp;real&nbsp;sections&nbsp;with&nbsp;these&nbsp;indices.<br>
Our&nbsp;approach&nbsp;is&nbsp;to&nbsp;deal&nbsp;with&nbsp;situations&nbsp;where&nbsp;section&nbsp;indices&nbsp;cannot<br>
be&nbsp;compatibly&nbsp;expanded&nbsp;to&nbsp;a&nbsp;full&nbsp;32&nbsp;bits<br>
by&nbsp;using&nbsp;one&nbsp;of&nbsp;these&nbsp;indices&nbsp;as&nbsp;an&nbsp;escape&nbsp;value&nbsp;indicating&nbsp;that&nbsp;the<br>
actual&nbsp;index&nbsp;will&nbsp;be&nbsp;found&nbsp;elsewhere.<br>
<br>
&lt;/i&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h4&gt;&nbsp;4.1&nbsp;Elf&nbsp;Header&nbsp;&lt;/h4&gt;<br>
&lt;i&gt;<br>
<br>
&lt;p&gt;<br>
The&nbsp;ELF&nbsp;header&nbsp;has&nbsp;two&nbsp;relevant&nbsp;16-bit&nbsp;fields:<br>
e_shnum&nbsp;contains&nbsp;the&nbsp;section&nbsp;count,<br>
and&nbsp;e_shtrndx&nbsp;the&nbsp;index&nbsp;of&nbsp;a&nbsp;string&nbsp;section.<br>
We&nbsp;modify&nbsp;their&nbsp;descriptions,<br>
and&nbsp;add&nbsp;two&nbsp;new&nbsp;optional&nbsp;fields&nbsp;as&nbsp;follows:<br>
&lt;/i&gt;<br>
<br>
&lt;dl&gt;<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;ElfXX_Half&nbsp;e_shnum;&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;member&nbsp;holds&nbsp;the&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;the&nbsp;section&nbsp;header&nbsp;table.<br>
Thus&nbsp;the&nbsp;product&nbsp;of&nbsp;&lt;code&gt;e_shentsize&lt;/code&gt;&nbsp;and&nbsp;&lt;code&gt;e_shnum&lt;/code&gt;<br>
gives&nbsp;the&nbsp;section&nbsp;header&nbsp;table's&nbsp;size&nbsp;in&nbsp;bytes.<br>
If&nbsp;a&nbsp;file&nbsp;has&nbsp;no&nbsp;section&nbsp;header&nbsp;table,<br>
&lt;code&gt;e_shnum&lt;/code&gt;&nbsp;holds&nbsp;the&nbsp;value&nbsp;zero.<br>
&lt;p&gt;<br>
If&nbsp;the&nbsp;number&nbsp;of&nbsp;sections&nbsp;is&nbsp;greater&nbsp;than<br>
&lt;code&gt;SHN_LORESERVE&lt;/code&gt;&nbsp;(&lt;code&gt;0xff00&lt;/code&gt;),<br>
this&nbsp;member&nbsp;has&nbsp;the&nbsp;value&nbsp;&lt;code&gt;SHN_XINDEX&lt;/code&gt;&nbsp;(&lt;code&gt;0xffff&lt;/code&gt;),<br>
and&nbsp;the&nbsp;actual&nbsp;number&nbsp;of&nbsp;section&nbsp;header&nbsp;table&nbsp;entries&nbsp;is&nbsp;in&nbsp;the&nbsp;member<br>
&lt;code&gt;e_xshnum&lt;/code&gt;&nbsp;(below).<br>
&lt;/dd&gt;<br>
<br>
<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;ElfXX_Half&nbsp;e_shstrndx;&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;member&nbsp;holds&nbsp;the&nbsp;section&nbsp;header&nbsp;table&nbsp;index&nbsp;of&nbsp;the&nbsp;entry<br>
associated&nbsp;with&nbsp;the&nbsp;section&nbsp;name&nbsp;string&nbsp;table.<br>
If&nbsp;the&nbsp;file&nbsp;has&nbsp;no&nbsp;section&nbsp;name&nbsp;string&nbsp;table,<br>
this&nbsp;member&nbsp;holds&nbsp;the&nbsp;value&nbsp;&lt;code&gt;SHN_UNDEF&lt;/code&gt;.<br>
See&nbsp;``Sections''&nbsp;and&nbsp;``String&nbsp;Table''&nbsp;below&nbsp;for&nbsp;more&nbsp;information.<br>
&lt;p&gt;<br>
If&nbsp;the&nbsp;section&nbsp;name&nbsp;string&nbsp;table&nbsp;index&nbsp;is&nbsp;greater&nbsp;than<br>
&lt;code&gt;SHN_LORESERVE&lt;/code&gt;&nbsp;(&lt;code&gt;0xff00&lt;/code&gt;),<br>
this&nbsp;member&nbsp;has&nbsp;the&nbsp;value&nbsp;&lt;code&gt;SHN_XINDEX&lt;/code&gt;&nbsp;(&lt;code&gt;0xffff&lt;/code&gt;),<br>
and&nbsp;the&nbsp;actual&nbsp;index&nbsp;of&nbsp;the&nbsp;section&nbsp;name&nbsp;string&nbsp;table&nbsp;is&nbsp;in&nbsp;the&nbsp;member<br>
&lt;code&gt;e_xshstrndx&lt;/code&gt;&nbsp;(below).<br>
&lt;/dd&gt;<br>
<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;ElfXX_Word&nbsp;e_xshnum;&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;member&nbsp;holds&nbsp;the&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;the&nbsp;section&nbsp;header&nbsp;table,<br>
if&nbsp;that&nbsp;number&nbsp;is&nbsp;too&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;&lt;code&gt;e_shnum&lt;/code&gt;.<br>
It&nbsp;need&nbsp;not&nbsp;be&nbsp;present&nbsp;in&nbsp;the&nbsp;ELF&nbsp;header&nbsp;if&nbsp;it&nbsp;is&nbsp;not&nbsp;needed,<br>
and&nbsp;&lt;code&gt;e_ehsize&lt;/code&gt;&nbsp;should&nbsp;reflect&nbsp;its&nbsp;presence&nbsp;or&nbsp;absence.<br>
&lt;/dd&gt;<br>
<br>
<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;ElfXX_Word&nbsp;e_xshstrndx;&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;member&nbsp;holds&nbsp;the&nbsp;section&nbsp;header&nbsp;table&nbsp;index&nbsp;of&nbsp;the&nbsp;entry<br>
associated&nbsp;with&nbsp;the&nbsp;section&nbsp;name&nbsp;string&nbsp;table,<br>
if&nbsp;that&nbsp;index&nbsp;is&nbsp;too&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;&lt;code&gt;e_shstrndx&lt;/code&gt;.<br>
It&nbsp;need&nbsp;not&nbsp;be&nbsp;present&nbsp;in&nbsp;the&nbsp;ELF&nbsp;header&nbsp;if&nbsp;it&nbsp;is&nbsp;not&nbsp;needed<br>
(in&nbsp;which&nbsp;case&nbsp;&lt;code&gt;e_xshnum&lt;/code&gt;&nbsp;is&nbsp;also&nbsp;needed),<br>
and&nbsp;&lt;code&gt;e_ehsize&lt;/code&gt;&nbsp;should&nbsp;reflect&nbsp;its&nbsp;presence&nbsp;or&nbsp;absence.<br>
&lt;/dd&gt;<br>
<br>
&lt;/dl&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h4&gt;&nbsp;4.2&nbsp;Sections&nbsp;&lt;/h4&gt;<br>
&lt;i&gt;<br>
<br>
&lt;p&gt;<br>
We&nbsp;define&nbsp;a&nbsp;new&nbsp;special&nbsp;section&nbsp;index&nbsp;as&nbsp;an&nbsp;escape&nbsp;value&nbsp;for<br>
large&nbsp;section&nbsp;indices,&nbsp;as&nbsp;referenced&nbsp;above:<br>
&lt;/i&gt;<br>
<br>
&lt;dl&gt;<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;SHN_XINDEX&nbsp;(0xffff)&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;special&nbsp;section&nbsp;index&nbsp;means,&nbsp;conventionally,<br>
that&nbsp;the&nbsp;actual&nbsp;section&nbsp;index&nbsp;is&nbsp;too&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;the&nbsp;field<br>
where&nbsp;it&nbsp;appears,<br>
and&nbsp;is&nbsp;to&nbsp;be&nbsp;found&nbsp;in&nbsp;another&nbsp;location<br>
(specific&nbsp;to&nbsp;the&nbsp;structure&nbsp;where&nbsp;it&nbsp;appears).<br>
&lt;/dd&gt;<br>
<br>
&lt;/dl&gt;<br>
<br>
&lt;p&gt;<br>
&lt;i&gt;<br>
We&nbsp;note&nbsp;here&nbsp;that&nbsp;the&nbsp;section&nbsp;header&nbsp;contains&nbsp;two&nbsp;fields&nbsp;commonly&nbsp;used<br>
to&nbsp;hold&nbsp;section&nbsp;indices,&nbsp;&lt;code&gt;sh_link&lt;/code&gt;&nbsp;and&nbsp;&lt;code&gt;sh_info&lt;/code&gt;,<br>
but&nbsp;they&nbsp;are&nbsp;already&nbsp;defined&nbsp;as&nbsp;ElfXX_Word,&nbsp;and&nbsp;require&nbsp;no&nbsp;change.<br>
&lt;/i&gt;<br>
<br>
&lt;p&gt;<br>
&lt;i&gt;<br>
A&nbsp;new&nbsp;section&nbsp;type&nbsp;is&nbsp;defined:<br>
&lt;/i&gt;<br>
<br>
&lt;dl&gt;<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;SHT_SYMTAB_IDX&nbsp;(17)&lt;/code&gt;<br>
&lt;dd&gt;<br>
A&nbsp;section&nbsp;of&nbsp;this&nbsp;type&nbsp;is&nbsp;paired&nbsp;with&nbsp;an&nbsp;SHT_SYMTAB&nbsp;section,<br>
if&nbsp;any&nbsp;of&nbsp;the&nbsp;symbols&nbsp;in&nbsp;that&nbsp;section&nbsp;reference&nbsp;a&nbsp;section&nbsp;index<br>
larger&nbsp;than&nbsp;16&nbsp;bits.<br>
It&nbsp;contains&nbsp;a&nbsp;table&nbsp;of&nbsp;32-bit&nbsp;section&nbsp;indices,<br>
one&nbsp;for&nbsp;each&nbsp;symbol&nbsp;in&nbsp;the&nbsp;symbol&nbsp;table&nbsp;section,<br>
in&nbsp;the&nbsp;same&nbsp;order.<br>
&lt;p&gt;<br>
The&nbsp;&lt;code&gt;sh_link&lt;/code&gt;&nbsp;field&nbsp;of&nbsp;this&nbsp;section&nbsp;contains&nbsp;the&nbsp;index&nbsp;of&nbsp;the<br>
associated&nbsp;&lt;code&gt;SHT_SYMTAB&lt;/code&gt;&nbsp;section.<br>
&lt;/dd&gt;<br>
<br>
&lt;/dl&gt;<br>
<br>
&lt;p&gt;<br>
&lt;i&gt;<br>
A&nbsp;new&nbsp;special&nbsp;section&nbsp;name&nbsp;is&nbsp;defined:<br>
&lt;/i&gt;<br>
<br>
&lt;dl&gt;<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;.symtab_idx&lt;/code&gt;<br>
&lt;dd&gt;<br>
This&nbsp;section&nbsp;holds&nbsp;a&nbsp;section&nbsp;header&nbsp;index&nbsp;table&nbsp;for&nbsp;an&nbsp;associated<br>
&lt;code&gt;.symtab&lt;/code&gt;&nbsp;section.<br>
The&nbsp;section's&nbsp;attributes&nbsp;will&nbsp;include&nbsp;the&nbsp;&lt;code&gt;SHF_ALLOC&lt;/code&gt;&nbsp;bit<br>
if&nbsp;the&nbsp;associated&nbsp;&lt;code&gt;.symtab&lt;/code&gt;&nbsp;section&nbsp;does;<br>
otherwise,&nbsp;that&nbsp;bit&nbsp;will&nbsp;be&nbsp;off.<br>
&lt;/dd&gt;<br>
<br>
&lt;/dl&gt;<br>
<br>
&lt;p&gt;<br>
&lt;i&gt;<br>
There&nbsp;is&nbsp;no&nbsp;available&nbsp;field&nbsp;to&nbsp;point&nbsp;from&nbsp;the&nbsp;&lt;code&gt;.symtab&lt;/code&gt;&nbsp;section<br>
to&nbsp;its&nbsp;associated&nbsp;&lt;code&gt;.symtab_idx&lt;/code&gt;&nbsp;section,<br>
so&nbsp;we&nbsp;use&nbsp;the&nbsp;&lt;code&gt;sh_link&lt;/code&gt;&nbsp;field&nbsp;in&nbsp;the&nbsp;latter&nbsp;to&nbsp;point&nbsp;back.<br>
It&nbsp;is&nbsp;recommended&nbsp;(but&nbsp;not&nbsp;required)&nbsp;that&nbsp;implementations&nbsp;place&nbsp;the<br>
&lt;code&gt;.symtab_idx&lt;/code&gt;&nbsp;section&nbsp;immediately&nbsp;after&nbsp;its&nbsp;associated<br>
&lt;code&gt;.symtab&lt;/code&gt;&nbsp;section&nbsp;(in&nbsp;the&nbsp;section&nbsp;header&nbsp;table)<br>
to&nbsp;make&nbsp;it&nbsp;easy&nbsp;for&nbsp;the&nbsp;linker&nbsp;to&nbsp;find.<br>
&lt;/i&gt;<br>
<br>
&lt;p&gt;<br>
&lt;h4&gt;&nbsp;4.x&nbsp;Symbol&nbsp;Table&nbsp;&lt;/h4&gt;<br>
&lt;i&gt;<br>
<br>
&lt;p&gt;<br>
The&nbsp;symbol&nbsp;table&nbsp;is&nbsp;the&nbsp;most&nbsp;problematic.<br>
It&nbsp;has&nbsp;no&nbsp;convenient&nbsp;location&nbsp;for&nbsp;an&nbsp;expanded&nbsp;section&nbsp;index.<br>
Therefore,&nbsp;we&nbsp;propose&nbsp;that&nbsp;the&nbsp;escape&nbsp;value&nbsp;imply&nbsp;redirection&nbsp;to&nbsp;a<br>
separate,&nbsp;parallel&nbsp;table&nbsp;containing&nbsp;full-size&nbsp;section&nbsp;indices.<br>
<br>
&lt;p&gt;<br>
Modify&nbsp;the&nbsp;definition&nbsp;of&nbsp;&lt;code&gt;st_shndx&lt;/code&gt;&nbsp;as&nbsp;follows:<br>
&lt;/i&gt;<br>
<br>
&lt;dl&gt;<br>
&lt;p&gt;<br>
&lt;dt&gt;&nbsp;&lt;code&gt;st_shndx&lt;/code&gt;<br>
&lt;dd&gt;<br>
Every&nbsp;symbol&nbsp;table&nbsp;entry&nbsp;is&nbsp;defined&nbsp;in&nbsp;relation&nbsp;to&nbsp;some&nbsp;section.<br>
This&nbsp;member&nbsp;holds&nbsp;the&nbsp;relevant&nbsp;section&nbsp;header&nbsp;table&nbsp;index.<br>
&lt;p&gt;<br>
As&nbsp;the&nbsp;&lt;code&gt;sh_link&lt;/code&gt;&nbsp;and&nbsp;&lt;code&gt;sh_info&lt;/code&gt;&nbsp;interpretation<br>
table&nbsp;and&nbsp;the&nbsp;related&nbsp;text&nbsp;describe,<br>
section&nbsp;indexes&nbsp;in&nbsp;the&nbsp;range&nbsp;0xff00&nbsp;to&nbsp;0xffff&nbsp;indicate&nbsp;special&nbsp;meanings.<br>
In&nbsp;particular,&nbsp;&lt;code&gt;SHN_XINDEX&nbsp;(0xffff)&lt;/code&gt;&nbsp;indicates&nbsp;that&nbsp;the<br>
real&nbsp;index&nbsp;is&nbsp;too&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;this&nbsp;field,<br>
and&nbsp;must&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;associated&nbsp;SHT_SYMTAB_IDX&nbsp;table&nbsp;(above).<br>
&lt;/dd&gt;<br>
<br>
&lt;/dl&gt;<br>
<br>
&lt;p&gt;<br>
If&nbsp;any&nbsp;of&nbsp;the&nbsp;&lt;code&gt;st_shndx&lt;/code&gt;&nbsp;fields&nbsp;in&nbsp;a&nbsp;symbol&nbsp;table&nbsp;section<br>
contain&nbsp;the&nbsp;value&nbsp;&lt;code&gt;SHN_XINDEX&nbsp;(0xffff)&lt;/code&gt;,<br>
there&nbsp;must&nbsp;be&nbsp;an&nbsp;associated&nbsp;&lt;code&gt;SHT_SYMTAB_IDX&lt;/code&gt;&nbsp;section,<br>
with&nbsp;a&nbsp;&lt;code&gt;sh_link&lt;/code&gt;&nbsp;field&nbsp;containing&nbsp;the&nbsp;index&nbsp;of&nbsp;this<br>
&lt;code&gt;SHT_SYMTAB&lt;/code&gt;&nbsp;section.<br>
That&nbsp;section&nbsp;contains&nbsp;an&nbsp;array&nbsp;of&nbsp;32-bit&nbsp;section&nbsp;indices,<br>
matching&nbsp;the&nbsp;symbol&nbsp;table&nbsp;entries&nbsp;1-1&nbsp;in&nbsp;the&nbsp;same&nbsp;order.<br>
Entries&nbsp;corresponding&nbsp;to&nbsp;&lt;code&gt;SHN_XINDEX&nbsp;(0xffff)&lt;/code&gt;&nbsp;values&nbsp;of<br>
&lt;code&gt;st_shndx&lt;/code&gt;&nbsp;in&nbsp;the&nbsp;symbol&nbsp;table&nbsp;must&nbsp;contain&nbsp;the&nbsp;actual<br>
section&nbsp;header&nbsp;index&nbsp;to&nbsp;be&nbsp;used.<br>
Others&nbsp;should&nbsp;contain&nbsp;either&nbsp;the&nbsp;correct&nbsp;section&nbsp;header&nbsp;index<br>
(i.e.&nbsp;duplicating&nbsp;the&nbsp;value&nbsp;in&nbsp;&lt;code&gt;st_shndx&lt;/code&gt;),&nbsp;or&nbsp;zero.<br>
<br>
<br>
&lt;p&gt;<br>
&lt;h4&gt;&nbsp;Compatibility&nbsp;&lt;/h4&gt;<br>
<br>
&lt;p&gt;<br>
There&nbsp;should&nbsp;be&nbsp;no&nbsp;compatibility&nbsp;impact&nbsp;on&nbsp;existing&nbsp;environments,<br>
since&nbsp;only&nbsp;very&nbsp;large&nbsp;section&nbsp;counts&nbsp;require&nbsp;object&nbsp;file&nbsp;changes.<br>
Individual&nbsp;vendors&nbsp;can&nbsp;postpone&nbsp;implementation&nbsp;until&nbsp;convenient,<br>
with&nbsp;no&nbsp;impact&nbsp;on&nbsp;typical&nbsp;programs.<br>
<br>
&lt;/i&gt;<br>
<br>
&lt;p&gt;<br>
&lt;hr&gt;<br>
<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
