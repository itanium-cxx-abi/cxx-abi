<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;27&nbsp;January&nbsp;2014&nbsp;11:57,&nbsp;John&nbsp;McCall&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;Jan&nbsp;24,&nbsp;2014,&nbsp;at&nbsp;7:30&nbsp;PM,&nbsp;Nick&nbsp;Lewycky&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:nlewycky@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;nlewycky@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;24&nbsp;January&nbsp;2014&nbsp;17:54,&nbsp;John&nbsp;McCall&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;On&nbsp;Jan&nbsp;24,&nbsp;2014,&nbsp;at&nbsp;5:36&nbsp;PM,&nbsp;Nick&nbsp;Lewycky&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:nlewycky@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;nlewycky@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;23&nbsp;January&nbsp;2014&nbsp;11:52,&nbsp;John&nbsp;McCall&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;On&nbsp;Jan&nbsp;21,&nbsp;2014,&nbsp;at&nbsp;2:01&nbsp;PM,&nbsp;Richard&nbsp;Smith&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:richardsmith@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;richardsmith@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;21&nbsp;January&nbsp;2014&nbsp;09:36,&nbsp;John&nbsp;McCall&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rjmccall@apple.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rjmccall@apple.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;On&nbsp;Jan&nbsp;20,&nbsp;2014,&nbsp;at&nbsp;6:13&nbsp;PM,&nbsp;Nick&nbsp;Lewycky&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:nlewycky@google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;nlewycky@google.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;I&#39;m&nbsp;trying&nbsp;to&nbsp;mangle&nbsp;a&nbsp;vendor&nbsp;extension&nbsp;that&nbsp;encodes&nbsp;an&nbsp;expression&nbsp;which&nbsp;applies&nbsp;to&nbsp;function&nbsp;overload&nbsp;candidates,&nbsp;with&nbsp;the&nbsp;goal&nbsp;that&nbsp;a&nbsp;user&nbsp;running&nbsp;the&nbsp;demangler&nbsp;would&nbsp;see&nbsp;their&nbsp;expression&nbsp;demangled.&nbsp;While&nbsp;there&nbsp;are&nbsp;various&nbsp;vendor&nbsp;extension&nbsp;points,&nbsp;none&nbsp;of&nbsp;them&nbsp;allow&nbsp;me&nbsp;to&nbsp;go&nbsp;into&nbsp;encoding&nbsp;an&nbsp;expression,&nbsp;unless&nbsp;I&nbsp;stick&nbsp;a&nbsp;stray&nbsp;&quot;decltype&quot;&nbsp;in&nbsp;there,&nbsp;or&nbsp;similar&nbsp;(expression&nbsp;in&nbsp;a&nbsp;template&nbsp;argument&nbsp;that&nbsp;doesn&#39;t&nbsp;actually&nbsp;exist,&nbsp;etc.).&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;vendor&nbsp;extension&nbsp;is&nbsp;described&nbsp;in&nbsp;full&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;http://clang.llvm.org/docs/LanguageExtensions.html#controlling-overload-resolution&quot;&nbsp;target=&quot;_blank&quot;&gt;http://clang.llvm.org/docs/LanguageExtensions.html#controlling-overload-resolution&lt;/a&gt;&nbsp;.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;I&nbsp;can&nbsp;do&nbsp;it&nbsp;without&nbsp;an&nbsp;extension&nbsp;to&nbsp;the&nbsp;mangling&nbsp;rules.&nbsp;As&nbsp;a&nbsp;strawman&nbsp;proposal,&nbsp;I&nbsp;suggest&nbsp;this:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;type&gt;&nbsp;::=&nbsp;Ue&nbsp;&lt;expression&gt;&nbsp;E&nbsp;#&nbsp;vendor&nbsp;extended&nbsp;type&nbsp;qualifier&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;think&nbsp;you&nbsp;mean&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;&lt;type&gt;&nbsp;::=&nbsp;Ue&nbsp;&lt;source-name&gt;&nbsp;&lt;expression&gt;&nbsp;E&nbsp;&lt;type&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;this&nbsp;would&nbsp;be&nbsp;valuable&nbsp;for&nbsp;mangling&nbsp;e.g.&nbsp;dependent&nbsp;address&nbsp;space&nbsp;qualifiers,&nbsp;if&nbsp;anybody&nbsp;ever&nbsp;wants&nbsp;to&nbsp;do&nbsp;those.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Yep,&nbsp;that&#39;s&nbsp;what&nbsp;I&nbsp;meant.&nbsp;Thanks!&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;We&nbsp;could&nbsp;generalize&nbsp;this&nbsp;slightly&nbsp;to&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;&lt;type&gt;&nbsp;::=&nbsp;U&nbsp;&lt;source-name&gt;&nbsp;&lt;template-args&gt;&nbsp;&lt;type&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;to&nbsp;allow&nbsp;multiple&nbsp;arguments&nbsp;(as&nbsp;types&nbsp;or&nbsp;expressions),&nbsp;dependent&nbsp;pack&nbsp;expansions,&nbsp;and&nbsp;so&nbsp;on.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;That’s&nbsp;a&nbsp;bit&nbsp;more&nbsp;future-proof,&nbsp;I&nbsp;suppose,&nbsp;although&nbsp;I&nbsp;think&nbsp;it&nbsp;might&nbsp;stretch&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type-qualifier&nbsp;to&nbsp;embed&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;value,&nbsp;and&nbsp;value&nbsp;pack-expansions&nbsp;are&nbsp;already&nbsp;part&nbsp;of&nbsp;the&nbsp;&lt;expression&gt;&nbsp;grammar.&nbsp; You’re&nbsp;really&nbsp;asking&nbsp;for&nbsp;a&nbsp;“allow&nbsp;an&nbsp;arbitrarily&nbsp;complex&nbsp;type&nbsp;to&nbsp;be&nbsp;manufactured&nbsp;here”&nbsp;mangling.&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
However,&nbsp;it&nbsp;feels&nbsp;really&nbsp;forced&nbsp;to&nbsp;add&nbsp;your&nbsp;feature,&nbsp;specifically,&nbsp;to&nbsp;&lt;type&gt;,&nbsp;since&nbsp;it&nbsp;can’t&nbsp;appear&nbsp;in&nbsp;an&nbsp;arbitrary&nbsp;position;&nbsp;it’s&nbsp;much&nbsp;closer&nbsp;to&nbsp;a&nbsp;qualified&nbsp;method&nbsp;name.&nbsp; But&nbsp;the&nbsp;ref/cv-qualifiers&nbsp;area&nbsp;is&nbsp;only&nbsp;allowed&nbsp;in&nbsp;a&nbsp;&lt;nested-name&gt;,&nbsp;and&nbsp;you&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;this&nbsp;on&nbsp;a&nbsp;top-level&nbsp;function,&nbsp;so&nbsp;I&nbsp;suppose&nbsp;extending&nbsp;&lt;type&gt;&nbsp;in&nbsp;a&nbsp;known-useful&nbsp;direction&nbsp;and&nbsp;then&nbsp;abusing&nbsp;&lt;type&gt;&nbsp;might&nbsp;be&nbsp;the&nbsp;best&nbsp;thing.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;<br>
On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;isn’t&nbsp;this&nbsp;a&nbsp;proposed&nbsp;direction&nbsp;for&nbsp;standardization?&nbsp; I&nbsp;would&nbsp;have&nbsp;no&nbsp;problem&nbsp;with&nbsp;giving&nbsp;this&nbsp;a&nbsp;proper,&nbsp;non-vendor&nbsp;mangling&nbsp;just&nbsp;in&nbsp;case.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&#39;s&nbsp;not&nbsp;proposed&nbsp;for&nbsp;standardization&nbsp;with&nbsp;this&nbsp;syntax,&nbsp;and&nbsp;it&#39;s&nbsp;likely&nbsp;that&nbsp;the&nbsp;final&nbsp;semantics&nbsp;will&nbsp;differ&nbsp;from&nbsp;the&nbsp;Clang&nbsp;extension&nbsp;in&nbsp;some&nbsp;ways&nbsp;(the&nbsp;proposed&nbsp;partial&nbsp;ordering&nbsp;rules&nbsp;for&nbsp;constraints&nbsp;are&nbsp;rather&nbsp;more&nbsp;complex,&nbsp;for&nbsp;instance),&nbsp;but&nbsp;it&#39;s&nbsp;close&nbsp;enough&nbsp;that&nbsp;it&#39;s&nbsp;an&nbsp;option&nbsp;worth&nbsp;considering.&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unless&nbsp;the&nbsp;feature&nbsp;is&nbsp;likely&nbsp;to&nbsp;diverge&nbsp;so&nbsp;much&nbsp;that&nbsp;it&nbsp;won’t&nbsp;even&nbsp;be&nbsp;an&nbsp;expression&nbsp;anymore,&nbsp;I&nbsp;don’t&nbsp;think&nbsp;this&nbsp;poses&nbsp;any&nbsp;problem&nbsp;for&nbsp;the&nbsp;ABI.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
Vendor&nbsp;hat&nbsp;on,&nbsp;I&nbsp;reserve&nbsp;the&nbsp;right&nbsp;to&nbsp;make&nbsp;my&nbsp;extension&nbsp;behave&nbsp;differently&nbsp;from&nbsp;anything&nbsp;that&#39;s&nbsp;been&nbsp;standardized.&nbsp;As&nbsp;long&nbsp;as&nbsp;I&nbsp;can&nbsp;slip&nbsp;a&nbsp;vendor&nbsp;extension&nbsp;particle&nbsp;into&nbsp;the&nbsp;mangled&nbsp;name&nbsp;I&#39;ll&nbsp;be&nbsp;happy&nbsp;to&nbsp;use&nbsp;otherwise&nbsp;normal&nbsp;mangling.&nbsp;If&nbsp;it&nbsp;turns&nbsp;out&nbsp;I&nbsp;don&#39;t&nbsp;have&nbsp;to,&nbsp;all&nbsp;the&nbsp;better,&nbsp;but&nbsp;I&#39;m&nbsp;not&nbsp;banking&nbsp;on&nbsp;it.&lt;/div&gt;<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;completely&nbsp;agree&nbsp;that&nbsp;this&nbsp;is&nbsp;acceptable&nbsp;vendor-hat&nbsp;behavior&nbsp;and&nbsp;that&nbsp;the&nbsp;fake-qualifier&nbsp;idea&nbsp;isn’t&nbsp;a&nbsp;bad&nbsp;approach&nbsp;for&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
<br>
<br>
<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
&lt;div&gt;Do&nbsp;you&nbsp;want&nbsp;me&nbsp;to&nbsp;try&nbsp;to&nbsp;prepare&nbsp;a&nbsp;patch&nbsp;for&nbsp;template&nbsp;constraints?&nbsp;I&nbsp;think&nbsp;it&nbsp;would&nbsp;look&nbsp;similar&nbsp;to&nbsp;my&nbsp;strawman&nbsp;proposal,&nbsp;except&nbsp;that&nbsp;I&#39;d&nbsp;pick&nbsp;some&nbsp;other&nbsp;available&nbsp;letter?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;<br>
<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;except&nbsp;that&nbsp;grammatically&nbsp;you&nbsp;should&nbsp;make&nbsp;it&nbsp;part&nbsp;of&nbsp;the&nbsp;function&nbsp;&lt;encoding&gt;&nbsp;instead&nbsp;of&nbsp;adding&nbsp;it&nbsp;to&nbsp;&lt;type&gt;.&nbsp; It&nbsp;works&nbsp;out&nbsp;to&nbsp;the&nbsp;same&nbsp;basic&nbsp;position.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;<br>
<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Okay,&nbsp;first&nbsp;attempt&nbsp;at&nbsp;a&nbsp;patch&nbsp;attached.&nbsp;Please&nbsp;review.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;couple&nbsp;things.&nbsp;I&nbsp;chose&nbsp;&#39;Q&#39;,&nbsp;short&nbsp;for&nbsp;&#39;requires&#39;&nbsp;to&nbsp;indicate&nbsp;a&nbsp;constraint.&nbsp;I&nbsp;put&nbsp;the&nbsp;new&nbsp;part&nbsp;on&nbsp;all&nbsp;encodings,&nbsp;not&nbsp;just&nbsp;functions,&nbsp;because&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;mangle&nbsp;a&nbsp;static&nbsp;data&nbsp;member&nbsp;inside&nbsp;a&nbsp;class&nbsp;that&nbsp;has&nbsp;a&nbsp;concept&nbsp;applied,&nbsp;and&nbsp;similarly&nbsp;for&nbsp;its&nbsp;vtable&nbsp;and&nbsp;special&nbsp;members.&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;I’m&nbsp;confused&nbsp;about&nbsp;what&nbsp;you&nbsp;mean&nbsp;by&nbsp;‘concept’&nbsp;here.&nbsp; If&nbsp;it&#39;s&nbsp;just&nbsp;jargon&nbsp;for&nbsp;the&nbsp;enable_if&nbsp;feature,&nbsp;it&nbsp;seems&nbsp;completely&nbsp;counterproductive.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry,&nbsp;we&nbsp;had&nbsp;a&nbsp;miscommunication.&nbsp;I&nbsp;asked&nbsp;&quot;Do&nbsp;you&nbsp;want&nbsp;me&nbsp;to&nbsp;try&nbsp;to&nbsp;prepare&nbsp;a&nbsp;patch&nbsp;for&nbsp;template&nbsp;constraints?&quot;&nbsp;meaning&nbsp;template&nbsp;constraints&nbsp;as&nbsp;defined&nbsp;in&nbsp;N3701&nbsp;(a.k.a,&nbsp;&quot;concepts&nbsp;lite&quot;),&nbsp;and&nbsp;you&nbsp;answered&nbsp;&quot;Yes,&nbsp;except&nbsp;that&nbsp;grammatically&nbsp;you&nbsp;should&nbsp;make&nbsp;it&nbsp;part&nbsp;of&nbsp;the&nbsp;function&nbsp;&lt;encoding&gt;&nbsp;instead&nbsp;of&nbsp;adding&nbsp;it&nbsp;to&nbsp;&lt;type&gt;&quot;.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;thought&nbsp;you&nbsp;had&nbsp;asked&nbsp;me&nbsp;to&nbsp;invent&nbsp;a&nbsp;mangling&nbsp;for&nbsp;concept&nbsp;lite,&nbsp;then&nbsp;I&nbsp;would&nbsp;use&nbsp;that&nbsp;plus&nbsp;a&nbsp;vendor&nbsp;extension&nbsp;node&nbsp;somewhere&nbsp;in&nbsp;the&nbsp;expression&nbsp;to&nbsp;indicate&nbsp;that&nbsp;what&nbsp;I&nbsp;really&nbsp;had&nbsp;was&nbsp;a&nbsp;vendor&nbsp;extension.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;&lt;i&gt;did&lt;/i&gt;&nbsp;you&nbsp;mean?&nbsp;Sorry&nbsp;for&nbsp;the&nbsp;protracted&nbsp;discussion.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Nick&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;We&nbsp;do&nbsp;not&nbsp;need&nbsp;to&nbsp;mangle&nbsp;enable_if&nbsp;conditions&nbsp;on&nbsp;class&nbsp;template&nbsp;patterns&nbsp;because&nbsp;of&nbsp;the&nbsp;ODR&nbsp;(and&nbsp;related&nbsp;rules&nbsp;in&nbsp;the&nbsp;templates&nbsp;chapter).&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;enable_if&nbsp;has&nbsp;to&nbsp;be&nbsp;mangled&nbsp;for&nbsp;a&nbsp;function&nbsp;template&nbsp;because&nbsp;it’s&nbsp;part&nbsp;of&nbsp;the&nbsp;template&nbsp;signature.&nbsp; You&nbsp;can&nbsp;have&nbsp;two&nbsp;function&nbsp;template&nbsp;declarations&nbsp;in&nbsp;the&nbsp;scope&nbsp;scope&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;with&nbsp;identical&nbsp;template&nbsp;parameter&nbsp;signatures&nbsp;and&nbsp;type&nbsp;signatures,&nbsp;but&nbsp;if&nbsp;they&nbsp;have&nbsp;different&nbsp;enable_if&nbsp;conditions,&nbsp;then&nbsp;they’re&nbsp;considered&nbsp;different&nbsp;templates.&nbsp; In&nbsp;typical&nbsp;use,&nbsp;this&nbsp;isn’t&nbsp;actually&nbsp;important:&nbsp;two&nbsp;overlapping&nbsp;function&nbsp;templates&nbsp;are&nbsp;probably&nbsp;defined&nbsp;in&nbsp;the&nbsp;same&nbsp;header&nbsp;file,&nbsp;and&nbsp;it’s&nbsp;likely&nbsp;that&nbsp;every&nbsp;call&nbsp;site&nbsp;will&nbsp;see&nbsp;both&nbsp;of&nbsp;them,&nbsp;and&nbsp;so&nbsp;any&nbsp;given&nbsp;list&nbsp;of&nbsp;template&nbsp;arguments&nbsp;that&nbsp;doesn’t&nbsp;lead&nbsp;to&nbsp;an&nbsp;ambiguity&nbsp;will&nbsp;probably&nbsp;pick&nbsp;the&nbsp;same&nbsp;template&nbsp;every&nbsp;time.&nbsp; But&nbsp;that’s&nbsp;not&nbsp;actually&nbsp;*required*:&nbsp;it’s&nbsp;totally&nbsp;fine&nbsp;to&nbsp;have&nbsp;two&nbsp;different&nbsp;function&nbsp;templates&nbsp;in&nbsp;two&nbsp;different&nbsp;translation&nbsp;units&nbsp;that&nbsp;both&nbsp;accept&nbsp;the&nbsp;same&nbsp;template&nbsp;arguments,&nbsp;and&nbsp;we&nbsp;need&nbsp;to&nbsp;distinguish&nbsp;them.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;two&nbsp;class&nbsp;temploids&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;in&nbsp;the&nbsp;same&nbsp;scope&nbsp;always&nbsp;declare&nbsp;the&nbsp;same&nbsp;entity&nbsp;for&nbsp;the&nbsp;ODR’s&nbsp;purposes,&nbsp;and&nbsp;if&nbsp;a&nbsp;particular&nbsp;list&nbsp;of&nbsp;template&nbsp;arguments&nbsp;would&nbsp;pick&nbsp;an&nbsp;explicit&nbsp;specialization&nbsp;([temp.expl.spec]p6)&nbsp;or&nbsp;partial&nbsp;specialization&nbsp;([temp.class.spec]p1),&nbsp;that&nbsp;specialization&nbsp;is&nbsp;required&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;every&nbsp;translation&nbsp;unit&nbsp;that&nbsp;would&nbsp;use&nbsp;it.&nbsp; So&nbsp;while&nbsp;you&nbsp;can&nbsp;guard&nbsp;a&nbsp;template&nbsp;pattern&nbsp;with&nbsp;an&nbsp;enable_if&nbsp;clause,&nbsp;it&nbsp;just&nbsp;controls&nbsp;whether&nbsp;that&nbsp;pattern&nbsp;is&nbsp;selected&nbsp;for&nbsp;instantiation,&nbsp;and&nbsp;the&nbsp;decision&nbsp;to&nbsp;select&nbsp;that&nbsp;pattern&nbsp;doesn’t&nbsp;need&nbsp;to&nbsp;be&nbsp;mangled&nbsp;in&nbsp;for&nbsp;the&nbsp;same&nbsp;basic&nbsp;reason&nbsp;that&nbsp;we&nbsp;don’t&nbsp;have&nbsp;to&nbsp;mangle&nbsp;in&nbsp;the&nbsp;partial-specialization&nbsp;signature&nbsp;we&nbsp;choose:&nbsp;ultimately,&nbsp;you&nbsp;can&nbsp;never&nbsp;legally&nbsp;simultaneously&nbsp;instantiate&nbsp;foo&lt;int,char*&gt;&nbsp;from&nbsp;two&nbsp;different&nbsp;patterns.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;there&nbsp;are&nbsp;concepts&nbsp;proposals&nbsp;that&nbsp;interfere&nbsp;with&nbsp;this&nbsp;along&nbsp;multiple&nbsp;axes.&nbsp; There&nbsp;are&nbsp;proposals&nbsp;which&nbsp;allow&nbsp;you&nbsp;to&nbsp;explicitly&nbsp;choose&nbsp;between&nbsp;ambiguous&nbsp;concept&nbsp;maps&nbsp;for&nbsp;a&nbsp;template&nbsp;argument,&nbsp;and&nbsp;there&nbsp;are&nbsp;proposals&nbsp;which&nbsp;allow&nbsp;you&nbsp;to&nbsp;define&nbsp;types&nbsp;in&nbsp;a&nbsp;concept&nbsp;map&nbsp;that&nbsp;would&nbsp;otherwise&nbsp;conflict&nbsp;in&nbsp;name&nbsp;with&nbsp;each&nbsp;other.&nbsp; Both&nbsp;proposals&nbsp;affect&nbsp;mangling:&nbsp;the&nbsp;former&nbsp;suggests&nbsp;that&nbsp;we&nbsp;need&nbsp;to&nbsp;mangle&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;concept&nbsp;map&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;template&nbsp;arguments,&nbsp;and&nbsp;the&nbsp;latter&nbsp;suggests&nbsp;that&nbsp;we&nbsp;need&nbsp;to&nbsp;mangle&nbsp;the&nbsp;concept&nbsp;map&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;context.&nbsp; But&nbsp;in&nbsp;neither&nbsp;case&nbsp;does&nbsp;a&nbsp;random&nbsp;expression&nbsp;in&nbsp;the&nbsp;&lt;encoding&gt;&nbsp;help.&lt;/div&gt;<br>
<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;John.&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
