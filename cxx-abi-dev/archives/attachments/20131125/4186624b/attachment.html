<tt>
&lt;font&nbsp;size=3&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;On&nbsp;&lt;i&gt;Wed&nbsp;Nov&nbsp;20&nbsp;05:33:31&nbsp;UTC&nbsp;2013,<br>
&lt;/i&gt;&lt;b&gt;John&nbsp;McCall&lt;/b&gt;&nbsp;&lt;/font&gt;&lt;a&nbsp;href=&quot;mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20C%2B%2B%20ABI%20version%202&amp;In-Reply-To=%3C8378D80B-AF16-4786-BFCB-F102CC07D94D%40apple.com%3E&quot;&gt;&lt;font&nbsp;size=3&nbsp;color=blue&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;u&gt;&lt;rjmccall<br>
at&nbsp;apple.com&gt;&lt;/u&gt;&lt;/font&gt;&lt;/a&gt;&lt;font&nbsp;size=3&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;i&gt;&nbsp;&lt;/i&gt;wrote<br>
&lt;/font&gt;&lt;font&nbsp;size=3&gt;:&nbsp;&lt;/font&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=3&gt;|&nbsp;On&nbsp;Nov&nbsp;19,&nbsp;2013,&nbsp;at&nbsp;5:57&nbsp;PM,&nbsp;Richard&nbsp;Smith&nbsp;&lt;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=3&nbsp;color=blue&gt;&lt;u&gt;richardsmith<br>
at&nbsp;google.com&lt;/u&gt;&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=3&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
|&nbsp;&gt;&lt;i&gt;&nbsp;There&nbsp;are&nbsp;a&nbsp;few&nbsp;things&nbsp;in&nbsp;the&nbsp;current&nbsp;ABI&nbsp;which&nbsp;are&nbsp;known&nbsp;to<br>
be&nbsp;suboptimal,&nbsp;but&nbsp;we&nbsp;cannot&nbsp;change&nbsp;because&nbsp;doing&nbsp;so&nbsp;would&nbsp;introduce&nbsp;an<br>
ABI&nbsp;break.&nbsp;However,&nbsp;vendors&nbsp;sometimes&nbsp;get&nbsp;an&nbsp;opportunity&nbsp;to&nbsp;break&nbsp;their<br>
ABI&nbsp;(or&nbsp;are&nbsp;defining&nbsp;a&nbsp;new&nbsp;ABI),&nbsp;and&nbsp;for&nbsp;some&nbsp;vendors,&nbsp;this&nbsp;is&nbsp;a&nbsp;very&nbsp;common<br>
occurrence.&nbsp;To&nbsp;this&nbsp;end,&nbsp;I&nbsp;think&nbsp;it&nbsp;would&nbsp;be&nbsp;valuable&nbsp;for&nbsp;the&nbsp;ABI&nbsp;document<br>
to&nbsp;describe&nbsp;what&nbsp;we&nbsp;might&nbsp;want&nbsp;to&nbsp;put&nbsp;in&nbsp;a&nbsp;'Version&nbsp;2'&nbsp;of&nbsp;the&nbsp;ABI;&nbsp;that<br>
is,&nbsp;a&nbsp;set&nbsp;of&nbsp;changes&nbsp;that&nbsp;we&nbsp;recommend&nbsp;be&nbsp;made&nbsp;whenever&nbsp;a&nbsp;vendor&nbsp;has&nbsp;a<br>
chance&nbsp;to&nbsp;introduce&nbsp;an&nbsp;ABI&nbsp;break.&lt;br&gt;<br>
|&nbsp;&lt;/i&gt;&gt;&lt;i&gt;&nbsp;&lt;br&gt;<br>
&lt;/i&gt;|&nbsp;&gt;&lt;i&gt;&nbsp;(Or&nbsp;perhaps&nbsp;this&nbsp;should&nbsp;be&nbsp;viewed&nbsp;from&nbsp;the&nbsp;opposite&nbsp;perspective:<br>
we&nbsp;could&nbsp;make&nbsp;improvements&nbsp;to&nbsp;the&nbsp;ABI,&nbsp;with&nbsp;an&nbsp;annex&nbsp;listing&nbsp;|&nbsp;changes<br>
that&nbsp;old&nbsp;platforms&nbsp;must&nbsp;make&nbsp;for&nbsp;compatibility.)&lt;br&gt;<br>
|&nbsp;&lt;/i&gt;&gt;&lt;i&gt;&nbsp;&lt;br&gt;<br>
&lt;/i&gt;|&nbsp;&gt;&lt;i&gt;&nbsp;Would&nbsp;there&nbsp;be&nbsp;support&nbsp;for&nbsp;this&nbsp;idea?&lt;br&gt;<br>
&lt;/i&gt;|&nbsp;&lt;br&gt;<br>
|&nbsp;Personally,&nbsp;I’m&nbsp;in&nbsp;favor&nbsp;of&nbsp;us&nbsp;generally&nbsp;documenting&nbsp;any&nbsp;vendor-specific<br>
deviations,&nbsp;as&nbsp;long&nbsp;as&nbsp;the&nbsp;vendor’s&nbsp;okay&nbsp;with&nbsp;it.&nbsp;&nbsp;In&nbsp;principle,<br>
that&nbsp;list&nbsp;of&nbsp;deviations&nbsp;could&nbsp;get&nbsp;unmanageably&nbsp;long,&nbsp;but&nbsp;I&nbsp;doubt&nbsp;it’d<br>
be&nbsp;a&nbsp;real&nbsp;issue.&lt;br&gt;<br>
|&lt;br&gt;<br>
|&nbsp;&gt;&lt;i&gt;&nbsp;In&nbsp;off-line&nbsp;discussion&nbsp;with&nbsp;John&nbsp;McCall,&nbsp;we&nbsp;came&nbsp;up&nbsp;with&nbsp;the<br>
following&nbsp;list&nbsp;of&nbsp;potential&nbsp;changes&nbsp;that&nbsp;might&nbsp;be&nbsp;made&nbsp;(sorry&nbsp;if&nbsp;I&nbsp;forgot<br>
any):&lt;br&gt;<br>
|&nbsp;&lt;/i&gt;&gt;&lt;i&gt;&nbsp;&lt;br&gt;<br>
&lt;/i&gt;|&nbsp;&gt;&lt;i&gt;&nbsp;&nbsp;*&nbsp;Simplify&nbsp;case&nbsp;2b&nbsp;in&nbsp;non-POD&nbsp;class&nbsp;layout.&lt;br&gt;<br>
|&lt;/i&gt;&lt;br&gt;<br>
|&nbsp;&gt;&lt;i&gt;&nbsp;&nbsp;*&nbsp;Make&nbsp;constructors&nbsp;and&nbsp;destructors&nbsp;return&nbsp;'this'&nbsp;instead<br>
of&nbsp;returning&nbsp;'void',&nbsp;in&nbsp;order&nbsp;to&nbsp;allow&nbsp;callers&nbsp;to&nbsp;avoid&nbsp;a&nbsp;reload&nbsp;in&nbsp;|&nbsp;common<br>
cases&nbsp;and&nbsp;to&nbsp;allow&nbsp;more&nbsp;tail&nbsp;calls.&lt;br&gt;<br>
|&nbsp;&lt;/i&gt;&gt;&lt;i&gt;&nbsp;&nbsp;*&nbsp;Make&nbsp;virtual&nbsp;functions&nbsp;that&nbsp;are&nbsp;defined&nbsp;as&nbsp;'inline'<br>
not&nbsp;be&nbsp;key&nbsp;functions&lt;br&gt;<br>
|&nbsp;&lt;/i&gt;&lt;br&gt;<br>
|&nbsp;Credit&nbsp;the&nbsp;good&nbsp;folks&nbsp;at&nbsp;ARM&nbsp;for&nbsp;these&nbsp;two&nbsp;ideas.&lt;br&gt;<br>
&lt;/font&gt;&lt;/tt&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;am&nbsp;curious&nbsp;about&nbsp;the&nbsp;history&nbsp;here,<br>
because&nbsp;it&nbsp;seems&nbsp;that&nbsp;the&nbsp;AArch64&nbsp;ARM&nbsp;ABI&nbsp;appears&nbsp;to&nbsp;drop&nbsp;these&nbsp;changes?<br>
&nbsp;Does&nbsp;anybody&nbsp;have&nbsp;an&nbsp;explanation&nbsp;what&nbsp;transpired&nbsp;to&nbsp;make&nbsp;ARM&nbsp;reconisder<br>
and&nbsp;go&nbsp;back&nbsp;to&nbsp;a&nbsp;more&nbsp;vanilla&nbsp;&quot;industry-standard&nbsp;ABI&quot;&nbsp;(aka&nbsp;Itanium<br>
ABI)?&nbsp;&nbsp;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Did&nbsp;it&nbsp;turn&nbsp;out&nbsp;that&nbsp;the&nbsp;improvements<br>
to&nbsp;be&nbsp;gotten&nbsp;(e.g.,&nbsp;by&nbsp;shaving&nbsp;off&nbsp;a&nbsp;few&nbsp;cycles&nbsp;for&nbsp;reloading&nbsp;this)&nbsp;just<br>
wasn't&nbsp;worth&nbsp;the&nbsp;cost&nbsp;of&nbsp;deviating&nbsp;from&nbsp;the&nbsp;center&nbsp;of&nbsp;gravity&nbsp;for&nbsp;the&nbsp;C++<br>
ABI&nbsp;that&nbsp;everybody&nbsp;else&nbsp;had,&nbsp;or&nbsp;can&nbsp;we&nbsp;infer&nbsp;more&nbsp;substantial&nbsp;reasons?<br>
&nbsp;(I&nbsp;think&nbsp;there&nbsp;may&nbsp;still&nbsp;be&nbsp;a&nbsp;few&nbsp;testcase&nbsp;fails&nbsp;for&nbsp;ARM32b&nbsp;due&nbsp;to<br>
different&nbsp;name&nbsp;mangling&nbsp;etc.)&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Also,&nbsp;the&nbsp;&nbsp;iOS&nbsp;ABI&nbsp;on&nbsp;32b&nbsp;ARM&nbsp;seems<br>
to&nbsp;have&nbsp;stepped&nbsp;back&nbsp;from&nbsp;the&nbsp;full&nbsp;scope&nbsp;of&nbsp;the&nbsp;ARM&nbsp;32b&nbsp;ABI?&nbsp;&nbsp;&nbsp;Any<br>
thoughts&nbsp;what&nbsp;is&nbsp;pulling&nbsp;these&nbsp;ABIs&nbsp;back&nbsp;into&nbsp;the&nbsp;&nbsp;mainline?&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=3&gt;On&nbsp;Nov&nbsp;21,&nbsp;2013,&nbsp;at&nbsp;12:41&nbsp;AM,&nbsp;Marc&nbsp;Glisse&nbsp;&lt;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=3&nbsp;color=blue&gt;&lt;u&gt;marc.glisse<br>
at&nbsp;inria.fr&lt;/u&gt;&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=3&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;i&gt;&nbsp;On&nbsp;Wed,&nbsp;20&nbsp;Nov&nbsp;2013,&nbsp;John&nbsp;McCall&nbsp;wrote:&lt;br&gt;<br>
&lt;/i&gt;&gt;&gt;&lt;i&gt;&nbsp;Well,&nbsp;to&nbsp;be&nbsp;clear,&nbsp;these&nbsp;would&nbsp;be&nbsp;recommendations&nbsp;for&nbsp;people<br>
willing&nbsp;to&nbsp;endure&nbsp;an&nbsp;ABI&nbsp;break.&nbsp;&nbsp;That&nbsp;would&nbsp;still&nbsp;be&nbsp;a&nbsp;big&nbsp;NO-NO&nbsp;for<br>
any&nbsp;established&nbsp;platforms&nbsp;that&nbsp;care&nbsp;about&nbsp;binary&nbsp;compatibility.&lt;br&gt;<br>
&lt;/i&gt;&gt;&gt;&lt;i&gt;&nbsp;&lt;br&gt;<br>
&lt;/i&gt;&gt;&gt;&lt;i&gt;&nbsp;And&nbsp;most&nbsp;of&nbsp;these&nbsp;changes&nbsp;are&nbsp;pretty&nbsp;minor&nbsp;improvements;<br>
the&nbsp;ABI&nbsp;has&nbsp;really&nbsp;held&nbsp;up&nbsp;very&nbsp;well.&lt;br&gt;<br>
&lt;/i&gt;&gt;&lt;i&gt;&nbsp;&lt;br&gt;<br>
&lt;/i&gt;&gt;&lt;i&gt;&nbsp;Indeed.&lt;/i&gt;&lt;/font&gt;&lt;/tt&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=3&gt;Not&nbsp;only&nbsp;that,&nbsp;but&nbsp;it&nbsp;appears&nbsp;that&nbsp;those&nbsp;who&nbsp;departed<br>
on&nbsp;the&nbsp;occasion&nbsp;of&nbsp;an&nbsp;ABI&nbsp;break&nbsp;seem&nbsp;to&nbsp;have&nbsp;come&nbsp;back&nbsp;into&nbsp;the&nbsp;fold&nbsp;on<br>
the&nbsp;next&nbsp;ABI&nbsp;break?&lt;/font&gt;&lt;/tt&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Mike&lt;/font&gt;
</tt>
