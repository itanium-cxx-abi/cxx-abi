<tt>
&lt;html&gt;&lt;body&gt;<br>
&lt;p&gt;On&nbsp;zSeries&nbsp;(i.e.&nbsp;390)&nbsp;the&nbsp;linkage&nbsp;for&nbsp;C&nbsp;and&nbsp;C++&nbsp;are&nbsp;different.&nbsp;&nbsp;Identifying&nbsp;all&nbsp;the&nbsp;places&nbsp;and&nbsp;providing&nbsp;solutions&nbsp;to&nbsp;the&nbsp;mixed&nbsp;linkage&nbsp;problems&nbsp;in&nbsp;the&nbsp;document&nbsp;is&nbsp;a&nbsp;prereq&nbsp;to&nbsp;implementing&nbsp;the&nbsp;C++ABI&nbsp;in&nbsp;zSeries&nbsp;compilers.&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Sean&nbsp;Perry&lt;br&gt;<br>
Compiler&nbsp;Development&lt;br&gt;<br>
IBM&nbsp;Canada&nbsp;Lab&lt;br&gt;<br>
(905)-413-6031&nbsp;(tie&nbsp;313-6031),&nbsp;fax&nbsp;(905)-413-4839&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;img&nbsp;width=&quot;16&quot;&nbsp;height=&quot;16&quot;&nbsp;src=&quot;cid:1__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;Inactive&nbsp;hide&nbsp;details&nbsp;for&nbsp;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&quot;&gt;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;style=&quot;background-image:url(cid:2__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com);&nbsp;background-repeat:&nbsp;no-repeat;&nbsp;&quot;&nbsp;width=&quot;40%&quot;&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;&lt;b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&lt;/font&gt;&lt;/b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&nbsp;&lt;/font&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;05/31/09&nbsp;12:10&nbsp;PM&lt;/font&gt;&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/td&gt;&lt;td&nbsp;width=&quot;60%&quot;&gt;<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;To&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;Dennis&nbsp;Handly&nbsp;&lt;dhandly@cup.hp.com&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;cc&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;cxx-abi-dev@codesourcery.com&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Subject&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;Re:&nbsp;[cxx-abi-dev]&nbsp;Deleted&nbsp;virtual&nbsp;functions&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
<br>
&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;58&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;336&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFD93EAC8f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;tt&gt;Dennis&nbsp;Handly&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Not&nbsp;on&nbsp;my&nbsp;implementation&nbsp;where&nbsp;C&nbsp;and&nbsp;C++&nbsp;calling&nbsp;conventions&nbsp;are&nbsp;the&nbsp;same.&lt;br&gt;<br>
&lt;br&gt;<br>
Given&nbsp;the&nbsp;precedent&nbsp;set&nbsp;with&nbsp;__cxa_pure_virtual,&nbsp;I&nbsp;think&nbsp;we&nbsp;should&nbsp;just&lt;br&gt;<br>
stick&nbsp;with&nbsp;extern&nbsp;&quot;C&quot;.&nbsp;&nbsp;Having&nbsp;half&nbsp;a&nbsp;solution&nbsp;isn't&nbsp;really&nbsp;very&lt;br&gt;<br>
interesting.&nbsp;&nbsp;If&nbsp;we&nbsp;care&nbsp;about&nbsp;implementations&nbsp;where&nbsp;C&nbsp;and&nbsp;C++&nbsp;linkage&lt;br&gt;<br>
are&nbsp;incompatible,&nbsp;we&nbsp;should&nbsp;go&nbsp;through&nbsp;the&nbsp;document,&nbsp;find&nbsp;places&nbsp;where&lt;br&gt;<br>
that&nbsp;assumption&nbsp;shows,&nbsp;and&nbsp;add&nbsp;new&nbsp;entry&nbsp;points&nbsp;as&nbsp;necessary.&nbsp;&nbsp;(We&lt;br&gt;<br>
cannot&nbsp;of&nbsp;course&nbsp;remove&nbsp;the&nbsp;existing&nbsp;functions,&nbsp;but&nbsp;we&nbsp;could&nbsp;add&nbsp;new&lt;br&gt;<br>
functions&nbsp;with&nbsp;C++&nbsp;linkage.)&lt;br&gt;<br>
&lt;br&gt;<br>
But,&nbsp;are&nbsp;there&nbsp;are&nbsp;at&nbsp;this&nbsp;point&nbsp;any&nbsp;implementations&nbsp;for&nbsp;which&nbsp;C&nbsp;and&nbsp;C++&lt;br&gt;<br>
linkage&nbsp;are&nbsp;incompatible&nbsp;in&nbsp;terms&nbsp;of&nbsp;calling&nbsp;conventions?&nbsp;&nbsp;If&nbsp;this&nbsp;is&lt;br&gt;<br>
just&nbsp;a&nbsp;theoretical&nbsp;concern,&nbsp;then&nbsp;we&nbsp;should&nbsp;leave&nbsp;it&nbsp;alone;&nbsp;that&nbsp;the&nbsp;ABI&lt;br&gt;<br>
constrains&nbsp;new&nbsp;implementations&nbsp;which&nbsp;wish&nbsp;to&nbsp;follow&nbsp;the&nbsp;ABI&nbsp;is&nbsp;not&nbsp;an&lt;br&gt;<br>
inherent&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&gt;&nbsp;(Note&nbsp;that&nbsp;some&nbsp;implementations&nbsp;of&nbsp;__cxa_pure_virtual&nbsp;call&nbsp;fprintf,&nbsp;and&lt;br&gt;<br>
&gt;&gt;&nbsp;thereby&nbsp;drag&nbsp;in&nbsp;the&nbsp;whole&nbsp;I/O&nbsp;library;&nbsp;it's&nbsp;not&nbsp;just&nbsp;the&nbsp;cost&nbsp;of&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;__cxa_pure_virtual&nbsp;function&nbsp;itself.)&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;don't&nbsp;see&nbsp;this&nbsp;as&nbsp;an&nbsp;issue.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;__cxa_pure_virtual&nbsp;that&lt;br&gt;<br>
&gt;&nbsp;calls&nbsp;fprintf&nbsp;the&nbsp;cost&nbsp;is&nbsp;already&nbsp;paid?&nbsp;&nbsp;At&nbsp;least&nbsp;in&nbsp;a&nbsp;shared&nbsp;lib&lt;br&gt;<br>
&gt;&nbsp;implementation.&lt;br&gt;<br>
&lt;br&gt;<br>
Yes&nbsp;--&nbsp;but&nbsp;for&nbsp;small&nbsp;embedded&nbsp;systems&nbsp;there&nbsp;are&nbsp;no&nbsp;shared&nbsp;libraries.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;assume&nbsp;the&nbsp;Standard&nbsp;says&nbsp;that&nbsp;if&nbsp;you&nbsp;manage&nbsp;to&nbsp;call&nbsp;that&nbsp;function,&nbsp;it's&lt;br&gt;<br>
&gt;&nbsp;your&nbsp;tough&nbsp;luck?&nbsp;&nbsp;;-)&lt;br&gt;<br>
&lt;br&gt;<br>
Yes.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Are&nbsp;we&nbsp;going&nbsp;to&nbsp;explain&nbsp;that&nbsp;&quot;may&quot;&nbsp;in&nbsp;detail&nbsp;in&nbsp;the&nbsp;ABI&nbsp;so&nbsp;we&nbsp;don't&nbsp;have&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;have&nbsp;this&nbsp;mail&nbsp;exchange&nbsp;again?&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;can&nbsp;ask&nbsp;Daveed&nbsp;if&nbsp;he&nbsp;will&nbsp;add&nbsp;a&nbsp;note&nbsp;to&nbsp;his&nbsp;drafting.&nbsp;:-)&nbsp;&nbsp;If&nbsp;not,&nbsp;I&lt;br&gt;<br>
can&nbsp;add&nbsp;one.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Mark&nbsp;Mitchell&lt;br&gt;<br>
CodeSourcery&lt;br&gt;<br>
mark@codesourcery.com&lt;br&gt;<br>
(650)&nbsp;331-3385&nbsp;x713&lt;br&gt;<br>
&lt;/tt&gt;&lt;br&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
