<tt>
&lt;html&gt;&lt;body&gt;<br>
&lt;p&gt;Unfortunately,&nbsp;I&nbsp;don't&nbsp;think&nbsp;changing&nbsp;the&nbsp;calling&nbsp;convention&nbsp;would&nbsp;be&nbsp;an&nbsp;option.&nbsp;&nbsp;We&nbsp;will&nbsp;need&nbsp;to&nbsp;clean&nbsp;up&nbsp;the&nbsp;ABI.&nbsp;&nbsp;In&nbsp;the&nbsp;meantime&nbsp;we&nbsp;should&nbsp;try&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;new&nbsp;changes&nbsp;doesn't&nbsp;compound&nbsp;the&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;area&nbsp;I've&nbsp;had&nbsp;concerns&nbsp;about&nbsp;is&nbsp;the&nbsp;comparison&nbsp;for&nbsp;equality&nbsp;of&nbsp;the&nbsp;typeid&nbsp;operator&nbsp;(2.9.3).&nbsp;&nbsp;There&nbsp;is&nbsp;a&nbsp;statement&nbsp;that&nbsp;doing&nbsp;a&nbsp;straight&nbsp;address&nbsp;comparison&nbsp;is&nbsp;sufficient&nbsp;for&nbsp;testing&nbsp;equality.&nbsp;&nbsp;That&nbsp;doesn't&nbsp;always&nbsp;work&nbsp;when&nbsp;you&nbsp;considered&nbsp;shared&nbsp;libraries.&nbsp;&nbsp;I&nbsp;am&nbsp;sure&nbsp;one&nbsp;of&nbsp;the&nbsp;python&nbsp;boost&nbsp;failures&nbsp;for&nbsp;xlC&nbsp;on&nbsp;linux&nbsp;is&nbsp;because&nbsp;the&nbsp;two&nbsp;sides&nbsp;of&nbsp;a&nbsp;comparison&nbsp;aren't&nbsp;resolving&nbsp;to&nbsp;the&nbsp;same&nbsp;object&nbsp;as&nbsp;you&nbsp;would&nbsp;expect.&nbsp;&nbsp;I&nbsp;was&nbsp;initially&nbsp;worried&nbsp;about&nbsp;systems&nbsp;like&nbsp;AIX&nbsp;where&nbsp;runtime&nbsp;symbol&nbsp;resolution&nbsp;wasn't&nbsp;the&nbsp;norm,&nbsp;but&nbsp;I'm&nbsp;starting&nbsp;to&nbsp;think&nbsp;Linux&nbsp;has&nbsp;the&nbsp;same&nbsp;problem.&lt;br&gt;<br>
--&lt;br&gt;<br>
Sean&nbsp;Perry&lt;br&gt;<br>
Compiler&nbsp;Development&lt;br&gt;<br>
IBM&nbsp;Canada&nbsp;Lab&lt;br&gt;<br>
(905)-413-6031&nbsp;(tie&nbsp;313-6031),&nbsp;fax&nbsp;(905)-413-4839&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;img&nbsp;width=&quot;16&quot;&nbsp;height=&quot;16&quot;&nbsp;src=&quot;cid:1__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;Inactive&nbsp;hide&nbsp;details&nbsp;for&nbsp;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&quot;&gt;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;style=&quot;background-image:url(cid:2__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com);&nbsp;background-repeat:&nbsp;no-repeat;&nbsp;&quot;&nbsp;width=&quot;40%&quot;&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;<br>
&lt;ul&gt;&lt;b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Mark&nbsp;Mitchell&nbsp;&lt;mark@codesourcery.com&gt;&lt;/font&gt;&lt;/b&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&nbsp;&lt;/font&gt;<br>
&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;06/01/09&nbsp;12:08&nbsp;PM&lt;/font&gt;&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/ul&gt;<br>
&lt;/td&gt;&lt;td&nbsp;width=&quot;60%&quot;&gt;<br>
&lt;table&nbsp;width=&quot;100%&quot;&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;To&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;Sean&nbsp;Perry/Toronto/IBM@IBMCA&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;cc&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;cxx-abi-dev@codesourcery.com,&nbsp;Dennis&nbsp;Handly&nbsp;&lt;dhandly@cup.hp.com&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;1%&quot;&gt;&lt;img&nbsp;width=&quot;58&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;div&nbsp;align=&quot;right&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;Subject&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;100%&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;Re:&nbsp;[cxx-abi-dev]&nbsp;Deleted&nbsp;virtual&nbsp;functions&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
<br>
&lt;table&nbsp;border=&quot;0&quot;&nbsp;cellspacing=&quot;0&quot;&nbsp;cellpadding=&quot;0&quot;&gt;<br>
&lt;tr&nbsp;valign=&quot;top&quot;&gt;&lt;td&nbsp;width=&quot;58&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;336&quot;&gt;&lt;img&nbsp;width=&quot;1&quot;&nbsp;height=&quot;1&quot;&nbsp;src=&quot;cid:3__=0ABBFF5BDFF422678f9e8a93df938@ca.ibm.com&quot;&nbsp;border=&quot;0&quot;&nbsp;alt=&quot;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;br&gt;<br>
&lt;tt&gt;Sean&nbsp;Perry&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;zSeries&nbsp;(i.e.&nbsp;390)&nbsp;the&nbsp;linkage&nbsp;for&nbsp;C&nbsp;and&nbsp;C++&nbsp;are&nbsp;different.&lt;br&gt;<br>
&gt;&nbsp;Identifying&nbsp;all&nbsp;the&nbsp;places&nbsp;and&nbsp;providing&nbsp;solutions&nbsp;to&nbsp;the&nbsp;mixed&nbsp;linkage&lt;br&gt;<br>
&gt;&nbsp;problems&nbsp;in&nbsp;the&nbsp;document&nbsp;is&nbsp;a&nbsp;prereq&nbsp;to&nbsp;implementing&nbsp;the&nbsp;C++ABI&nbsp;in&lt;br&gt;<br>
&gt;&nbsp;zSeries&nbsp;compilers.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;are&nbsp;going&nbsp;to&nbsp;change&nbsp;the&nbsp;ABI&nbsp;anyhow,&nbsp;would&nbsp;you&nbsp;reconsider&nbsp;this&lt;br&gt;<br>
difference&nbsp;in&nbsp;linkage?&nbsp;&nbsp;The&nbsp;ABI&nbsp;document&nbsp;defines&nbsp;various&nbsp;C++&nbsp;things&nbsp;in&lt;br&gt;<br>
terms&nbsp;of&nbsp;their&nbsp;C&nbsp;equivalents;&nbsp;for&nbsp;example,&nbsp;the&nbsp;ABI&nbsp;for&nbsp;a&nbsp;C++&nbsp;non-static&lt;br&gt;<br>
function&nbsp;member&nbsp;is&nbsp;defined&nbsp;in&nbsp;terms&nbsp;of&nbsp;the&nbsp;ABI&nbsp;for&nbsp;a&nbsp;C&nbsp;function&nbsp;with&nbsp;an&lt;br&gt;<br>
extra&nbsp;parameter&nbsp;for&nbsp;&quot;this&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;any&nbsp;case,&nbsp;if&nbsp;maintaining&nbsp;separate&nbsp;calling&nbsp;conventions&nbsp;for&nbsp;C&nbsp;and&nbsp;C++&lt;br&gt;<br>
is&nbsp;necessary,&nbsp;yes,&nbsp;I&nbsp;think&nbsp;you'll&nbsp;have&nbsp;to&nbsp;go&nbsp;through&nbsp;the&nbsp;document,&lt;br&gt;<br>
identify&nbsp;those&nbsp;places,&nbsp;and&nbsp;propose&nbsp;solutions.&nbsp;&nbsp;The&nbsp;solutions&nbsp;need&nbsp;to&lt;br&gt;<br>
preserve&nbsp;backwards&nbsp;compatibility,&nbsp;so&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;introduce&nbsp;some&nbsp;new&lt;br&gt;<br>
APIs&nbsp;that&nbsp;are&nbsp;used&nbsp;only&nbsp;on&nbsp;systems&nbsp;where&nbsp;the&nbsp;linkages&nbsp;do&nbsp;not&nbsp;match&nbsp;up.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Mark&nbsp;Mitchell&lt;br&gt;<br>
CodeSourcery&lt;br&gt;<br>
mark@codesourcery.com&lt;br&gt;<br>
(650)&nbsp;331-3385&nbsp;x713&lt;br&gt;<br>
&lt;/tt&gt;&lt;br&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
