<tt>
&lt;tt&gt;&lt;font&nbsp;size=2&gt;John&nbsp;McCall&nbsp;&lt;rjmccall@apple.com&gt;&nbsp;wrote&nbsp;on&nbsp;11/29/2013<br>
02:28:50&nbsp;AM:&lt;br&gt;<br>
On&nbsp;Nov&nbsp;25,&nbsp;2013,&nbsp;at&nbsp;7:05&nbsp;PM,&nbsp;Michael&nbsp;Gschwind&nbsp;&lt;mkg@us.ibm.com&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;On&nbsp;Wed&nbsp;Nov&nbsp;20&nbsp;05:33:31&nbsp;UTC&nbsp;2013,&nbsp;John&nbsp;McCall&nbsp;&lt;rjmccall&nbsp;at<br>
&lt;br&gt;<br>
&gt;&nbsp;apple.com&gt;&nbsp;wrote&nbsp;:&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;|&nbsp;Credit&nbsp;the&nbsp;good&nbsp;folks&nbsp;at&nbsp;ARM&nbsp;for&nbsp;these&nbsp;two&nbsp;ideas.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;I&nbsp;am&nbsp;curious&nbsp;about&nbsp;the&nbsp;history&nbsp;here,&nbsp;because&nbsp;it&nbsp;seems&nbsp;that&nbsp;the<br>
&lt;br&gt;<br>
&gt;&nbsp;AArch64&nbsp;ARM&nbsp;ABI&nbsp;appears&nbsp;to&nbsp;drop&nbsp;these&nbsp;changes?&nbsp;&nbsp;Does&nbsp;anybody<br>
have&nbsp;an&lt;br&gt;<br>
&gt;&nbsp;explanation&nbsp;what&nbsp;transpired&nbsp;to&nbsp;make&nbsp;ARM&nbsp;reconisder&nbsp;and&nbsp;go&nbsp;back&nbsp;to<br>
a&nbsp;&lt;br&gt;<br>
&gt;&nbsp;more&nbsp;vanilla&nbsp;&quot;industry-standard&nbsp;ABI&quot;&nbsp;(aka&nbsp;Itanium&nbsp;ABI)?&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Did&nbsp;it&nbsp;turn&nbsp;out&nbsp;that&nbsp;the&nbsp;improvements&nbsp;to&nbsp;be&nbsp;gotten&nbsp;(e.g.,&nbsp;by<br>
&lt;br&gt;<br>
&gt;&nbsp;shaving&nbsp;off&nbsp;a&nbsp;few&nbsp;cycles&nbsp;for&nbsp;reloading&nbsp;this)&nbsp;just&nbsp;wasn't&nbsp;worth&nbsp;the<br>
&lt;br&gt;<br>
&gt;&nbsp;cost&nbsp;of&nbsp;deviating&nbsp;from&nbsp;the&nbsp;center&nbsp;of&nbsp;gravity&nbsp;for&nbsp;the&nbsp;C++&nbsp;ABI&nbsp;that<br>
&lt;br&gt;<br>
&gt;&nbsp;everybody&nbsp;else&nbsp;had,&nbsp;or&nbsp;can&nbsp;we&nbsp;infer&nbsp;more&nbsp;substantial&nbsp;reasons?&nbsp;&nbsp;(I<br>
&lt;br&gt;<br>
&gt;&nbsp;think&nbsp;there&nbsp;may&nbsp;still&nbsp;be&nbsp;a&nbsp;few&nbsp;testcase&nbsp;fails&nbsp;for&nbsp;ARM32b&nbsp;due&nbsp;to&nbsp;&lt;br&gt;<br>
&gt;&nbsp;different&nbsp;name&nbsp;mangling&nbsp;etc.)&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Also,&nbsp;the&nbsp;&nbsp;iOS&nbsp;ABI&nbsp;on&nbsp;32b&nbsp;ARM&nbsp;seems&nbsp;to&nbsp;have&nbsp;stepped&nbsp;back<br>
from&nbsp;the&nbsp;&lt;br&gt;<br>
&gt;&nbsp;full&nbsp;scope&nbsp;of&nbsp;the&nbsp;ARM&nbsp;32b&nbsp;ABI?&nbsp;&nbsp;&nbsp;Any&nbsp;thoughts&nbsp;what&nbsp;is&nbsp;pulling<br>
these&nbsp;&lt;br&gt;<br>
&gt;&nbsp;ABIs&nbsp;back&nbsp;into&nbsp;the&nbsp;&nbsp;mainline?&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;believe&nbsp;you're&nbsp;over-interpreting&nbsp;the&nbsp;data.&nbsp;:)&nbsp;&nbsp;Compilers&nbsp;have<br>
been&lt;br&gt;<br>
&gt;&nbsp;very&nbsp;slow&nbsp;to&nbsp;implement&nbsp;any&nbsp;of&nbsp;the&nbsp;changes&nbsp;from&nbsp;the&nbsp;ARM&nbsp;C++&nbsp;ABI&nbsp;&lt;br&gt;<br>
&gt;&nbsp;(except&nbsp;the&nbsp;mandatory&nbsp;change&nbsp;to&nbsp;member&nbsp;function&nbsp;pointers),&nbsp;&lt;br&gt;<br>
&gt;&nbsp;essentially&nbsp;because&nbsp;(I&nbsp;believe)&nbsp;no&nbsp;major&nbsp;ARM-based&nbsp;platform&nbsp;has&nbsp;&lt;br&gt;<br>
&gt;&nbsp;actually&nbsp;adopted&nbsp;ARM’s&nbsp;C++&nbsp;ABI&nbsp;in&nbsp;full,&nbsp;essentially&nbsp;because&nbsp;&lt;br&gt;<br>
&gt;&nbsp;compilers&nbsp;have&nbsp;been&nbsp;very&nbsp;slow&nbsp;to&nbsp;implement&nbsp;any&nbsp;of&nbsp;it.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;point&nbsp;of&nbsp;this&nbsp;proposal&nbsp;is&nbsp;that,&nbsp;if&nbsp;a&nbsp;vendor&nbsp;is&nbsp;motivated&nbsp;enough<br>
&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;implement&nbsp;a&nbsp;better&nbsp;ABI&nbsp;when&nbsp;it’s&nbsp;bringing&nbsp;up&nbsp;the&nbsp;compiler&nbsp;for<br>
a&nbsp;&lt;br&gt;<br>
&gt;&nbsp;new&nbsp;platform,&nbsp;it’d&nbsp;be&nbsp;good&nbsp;to&nbsp;have&nbsp;recommendations&nbsp;for&nbsp;what&nbsp;to&nbsp;do.<br>
&nbsp;&lt;br&gt;<br>
&gt;&nbsp;And&nbsp;if&nbsp;those&nbsp;recommendations&nbsp;are&nbsp;actually&nbsp;out&nbsp;there&nbsp;and&nbsp;widely&nbsp;&lt;br&gt;<br>
&gt;&nbsp;agreed&nbsp;upon,&nbsp;that&nbsp;becomes&nbsp;an&nbsp;inducement&nbsp;for&nbsp;compiler&nbsp;vendors&nbsp;to&nbsp;&lt;br&gt;<br>
&gt;&nbsp;implement&nbsp;them,&nbsp;which&nbsp;of&nbsp;course&nbsp;makes&nbsp;it&nbsp;easier&nbsp;for&nbsp;any&nbsp;such&nbsp;new&nbsp;&lt;br&gt;<br>
&gt;&nbsp;platforms&nbsp;to&nbsp;adopt&nbsp;them.&lt;br&gt;<br>
&lt;/font&gt;&lt;/tt&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;understand&nbsp;the&nbsp;point&nbsp;you're&nbsp;making,<br>
but&nbsp;in&nbsp;the&nbsp;specific&nbsp;example,&nbsp;Apple&nbsp;was&nbsp;the&nbsp;one&nbsp;bringing&nbsp;up&nbsp;a&nbsp;new&nbsp;platform<br>
(which&nbsp;is&nbsp;exactly&nbsp;the&nbsp;opportunity&nbsp;point&nbsp;you're&nbsp;referencing)&nbsp;and&nbsp;chose&nbsp;not<br>
to&nbsp;do&nbsp;what&nbsp;you&nbsp;describe.&nbsp;&nbsp;And,&nbsp;as&nbsp;a&nbsp;kicker,&nbsp;ARM&nbsp;then&nbsp;basically&nbsp;went<br>
back&nbsp;on&nbsp;the&nbsp;platform&nbsp;recommendations&nbsp;they&nbsp;had&nbsp;for&nbsp;the&nbsp;32b&nbsp;ABI&nbsp;when&nbsp;the<br>
spec'ed&nbsp;a&nbsp;new&nbsp;ABI&nbsp;for&nbsp;64b.&nbsp;&nbsp;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;To&nbsp;phrase&nbsp;the&nbsp;question&nbsp;differently,<br>
when&nbsp;that&nbsp;platform&nbsp;vendor&nbsp;is&nbsp;to&nbsp;spec&nbsp;a&nbsp;new&nbsp;ABI&nbsp;(like&nbsp;Apple&nbsp;did),&nbsp;are&nbsp;the<br>
benefits&nbsp;of&nbsp;the&nbsp;proposed&nbsp;changes&nbsp;sufficient&nbsp;to&nbsp;motivate&nbsp;changes&nbsp;in&nbsp;what<br>
is&nbsp;(mostly)&nbsp;a&nbsp;machine-independent&nbsp;part&nbsp;of&nbsp;a&nbsp;compiler,&nbsp;that&nbsp;then&nbsp;has&nbsp;to<br>
be&nbsp;maintained&nbsp;separately,&nbsp;and&nbsp;can&nbsp;cause&nbsp;all&nbsp;sorts&nbsp;of&nbsp;distinct&nbsp;maintenance<br>
work?&nbsp;&nbsp;At&nbsp;what&nbsp;point&nbsp;does&nbsp;a&nbsp;platform&nbsp;vendor&nbsp;like&nbsp;Apple&nbsp;decide&nbsp;to&nbsp;walk<br>
down&nbsp;a&nbsp;trodden&nbsp;path&nbsp;-&nbsp;as&nbsp;per&nbsp;precedent&nbsp;-&nbsp;and&nbsp;how&nbsp;high&nbsp;has&nbsp;the&nbsp;payoff&nbsp;to<br>
be&nbsp;to&nbsp;forge&nbsp;a&nbsp;new&nbsp;path?&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;The&nbsp;Itanium&nbsp;C++&nbsp;&nbsp;ABI&nbsp;changes&nbsp;rose<br>
to&nbsp;a&nbsp;level&nbsp;of&nbsp;changeworthiness&nbsp;in&nbsp;the&nbsp;eyes&nbsp;of&nbsp;many&nbsp;and&nbsp;hence&nbsp;was&nbsp;widely<br>
implemented&nbsp;and&nbsp;adopted.&nbsp;&nbsp;ARM's&nbsp;proposed&nbsp;improvements,&nbsp;though&nbsp;arguably<br>
nice,&nbsp;shave&nbsp;off&nbsp;a&nbsp;small&nbsp;number&nbsp;of&nbsp;cycles&nbsp;of&nbsp;what&nbsp;is&nbsp;otherwise&nbsp;a&nbsp;comparatively<br>
larger&nbsp;cost,&nbsp;and&nbsp;it&nbsp;seems&nbsp;that&nbsp;when&nbsp;making&nbsp;a&nbsp;cost/benefit&nbsp;analysis&nbsp;both<br>
Apple&nbsp;for&nbsp;iOS&nbsp;and&nbsp;ARM&nbsp;for&nbsp;AArch64&nbsp;chose&nbsp;to&nbsp;forgo&nbsp;those&nbsp;changes,&nbsp;possibly<br>
based&nbsp;on&nbsp;enablement&nbsp;cost&nbsp;vs.&nbsp;expected&nbsp;benefits,&nbsp;as&nbsp;you're&nbsp;pointing&nbsp;out<br>
(implicitly).&nbsp;&nbsp;&lt;/font&gt;<br>
&lt;br&gt;
</tt>
