<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> C++ ABI patents
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20C%2B%2B%20ABI%20patents&In-Reply-To=%3Cu9lncgqq8v.fsf%40yorick.cygnus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000159.html">
   <LINK REL="Next"  HREF="000161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>C++ ABI patents</H1>
    <B>Jason Merrill</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20C%2B%2B%20ABI%20patents&In-Reply-To=%3Cu9lncgqq8v.fsf%40yorick.cygnus.com%3E"
       TITLE="C++ ABI patents">jason at cygnus.com
       </A><BR>
    <I>Fri Jul 16 20:44:16 UTC 1999</I>
    <P><UL>
        <LI>Previous message: <A HREF="000159.html">empty base packing strategy
</A></li>
        <LI>Next message: <A HREF="000161.html">Covariant polymorphic returns and when sharing B-D V-pointers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#160">[ date ]</a>
              <a href="thread.html#160">[ thread ]</a>
              <a href="subject.html#160">[ subject ]</a>
              <a href="author.html#160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Looks like this hasn't appeared on the list yet.

------- Start of forwarded message -------
Are you folks aware of the various C++ ABI patents out there?  Microsoft
has a bunch, one of which seems to cover all existing C++ implementations
(5410705), and IBM has at least one.  Here's what I came up with when I was
investigating last August; there may be more now.

----------------------

 &gt; 5794041, Law et al., C++ object model alternatives, IBM

Covers sharing a vptr with a virtual base when either the derived or base
classes have no other data members.  Note that Sun's C++ ABI document talks
about this optimization.  It was written in 1994, while the IBM patent was
filed in 1996.

The patent also covers some minor optimizations to avoid adjusting 'this'
in some cases, by pushing vtable entries down into derived classes.

 &gt; 5754862, Jones et al., Method and system for accessing virtual base
 &gt; classes, Microsoft

Covers use of a vbase table.

 &gt; 5617569, Gray et al., Method and system for implementing pointers to
 &gt; members in a compiler for an object-oriented programming language,
 &gt; Microsoft

Extends 5432936.  Also covers implementing pointers to member functions
using vbase offsets and calling virtual functions using thunks which check
the vtable rather than checking the vtable directly.

 &gt; 5603030, Gray et al., Method and system for destruction of objects using
 &gt; multiple destructor functions in an object-oriented computer system,
 &gt; Microsoft

Covers using multiple destructors for the different cases (should{,n't}
delete, should{,n't} destroy vbases, array), a useful optimization.

Sun's ABI also seems to touch on this, but this patent was filed in 1993.

 &gt; 5410705, Jones et al., Method for generating an object data structure
 &gt; layout for a class in a compiler for an object-oriented programming
 &gt; language, Microsoft 

This patent claims basic object layout, including sharing a vptr with a
non-virtual base, like we've been doing all along.  Shows how far they're
willing to go, and how ignorant the PTO is.

 &gt; 5371891, Gray et al., Method for object construction in a compiler for
 &gt; an object-oriented programming language, Microsoft

This describes Microsoft's solution for calling virtual functions in
virtual bases from constructors, by storing the offset in the vbase
itself.  But claim 59 seems broad enough to cover any solution to this
problem.

 &gt; 5297284, Jones et al., Method and system for implementing virtual
 &gt; functions and virtual base classes and setting a this pointer for an
 &gt; object-oriented programming language, Microsoft

This is the one everyone knows about; it covers the thunk optimization
(setting up Derived::f to take Base*).

------- End of forwarded message -------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000159.html">empty base packing strategy
</A></li>
	<LI>Next message: <A HREF="000161.html">Covariant polymorphic returns and when sharing B-D V-pointers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#160">[ date ]</a>
              <a href="thread.html#160">[ thread ]</a>
              <a href="subject.html#160">[ subject ]</a>
              <a href="author.html#160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
