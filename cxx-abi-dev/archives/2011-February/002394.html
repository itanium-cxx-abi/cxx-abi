<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] Decltype mangling and type dependency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Decltype%20mangling%20and%20type%20dependency&In-Reply-To=%3C4D6462BC.4060306%40redhat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002393.html">
   <LINK REL="Next"  HREF="002395.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] Decltype mangling and type dependency</H1>
    <B>Jason Merrill</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Decltype%20mangling%20and%20type%20dependency&In-Reply-To=%3C4D6462BC.4060306%40redhat.com%3E"
       TITLE="[cxx-abi-dev] Decltype mangling and type dependency">jason at redhat.com
       </A><BR>
    <I>Wed Feb 23 01:28:28 UTC 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002393.html">[cxx-abi-dev] C++0x std::rethrow_exception, data races and the Itanium ABI
</A></li>
        <LI>Next message: <A HREF="002395.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2394">[ date ]</a>
              <a href="thread.html#2394">[ thread ]</a>
              <a href="subject.html#2394">[ subject ]</a>
              <a href="author.html#2394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It occurs to me now that this is really a language question, not ABI. 
Is this testcase well-formed?

template&lt;class T, T* u&gt;
struct S
{
   decltype(u) foo(T);
};

template&lt;class T, T *u&gt;
T* S&lt;T, u&gt;::foo(T)
{
   T t;
   return t;
}

Type matching rules aren't well specified in the WP, but it seems 
reasonable to say that the definition needs to use decltype as well, 
which matches the decision to mangle decltype(u) in the signature.

Jason

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002393.html">[cxx-abi-dev] C++0x std::rethrow_exception, data races and the Itanium ABI
</A></li>
	<LI>Next message: <A HREF="002395.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2394">[ date ]</a>
              <a href="thread.html#2394">[ thread ]</a>
              <a href="subject.html#2394">[ subject ]</a>
              <a href="author.html#2394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
