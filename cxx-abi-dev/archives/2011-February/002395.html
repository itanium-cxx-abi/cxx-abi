<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [cxx-abi-dev] Decltype mangling and type dependency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Decltype%20mangling%20and%20type%20dependency&In-Reply-To=%3C8EE4A547-E1CD-4019-BE78-77183FA57FB8%40edg.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002394.html">
   <LINK REL="Next"  HREF="002396.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[cxx-abi-dev] Decltype mangling and type dependency</H1>
    <B>John Spicer</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20%5Bcxx-abi-dev%5D%20Decltype%20mangling%20and%20type%20dependency&In-Reply-To=%3C8EE4A547-E1CD-4019-BE78-77183FA57FB8%40edg.com%3E"
       TITLE="[cxx-abi-dev] Decltype mangling and type dependency">jhs at edg.com
       </A><BR>
    <I>Wed Feb 23 01:44:11 UTC 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002394.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
        <LI>Next message: <A HREF="002396.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2395">[ date ]</a>
              <a href="thread.html#2395">[ thread ]</a>
              <a href="subject.html#2395">[ subject ]</a>
              <a href="author.html#2395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Feb 22, 2011, at 8:28 PM, Jason Merrill wrote:

&gt;<i> It occurs to me now that this is really a language question, not ABI. Is this testcase well-formed?
</I>&gt;<i> 
</I>&gt;<i> template&lt;class T, T* u&gt;
</I>&gt;<i> struct S
</I>&gt;<i> {
</I>&gt;<i>  decltype(u) foo(T);
</I>&gt;<i> };
</I>&gt;<i> 
</I>&gt;<i> template&lt;class T, T *u&gt;
</I>&gt;<i> T* S&lt;T, u&gt;::foo(T)
</I>&gt;<i> {
</I>&gt;<i>  T t;
</I>&gt;<i>  return t;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Type matching rules aren't well specified in the WP, but it seems reasonable to say that the definition needs to use decltype as well, which matches the decision to mangle decltype(u) in the signature.
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Agreed.

I don't see any benefit in supporting inconsistent programming practices such as this.

John.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002394.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
	<LI>Next message: <A HREF="002396.html">[cxx-abi-dev] Decltype mangling and type dependency
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2395">[ date ]</a>
              <a href="thread.html#2395">[ thread ]</a>
              <a href="subject.html#2395">[ subject ]</a>
              <a href="author.html#2395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
