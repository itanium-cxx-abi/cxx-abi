<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Demangler prototype
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Demangler%20prototype&In-Reply-To=%3C200003102007.VAA09823%40pandora%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000772.html">
   <LINK REL="Next"  HREF="000738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Demangler prototype</H1>
    <B>Martin von Loewis</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Demangler%20prototype&In-Reply-To=%3C200003102007.VAA09823%40pandora%3E"
       TITLE="Demangler prototype">loewis at informatik.hu-berlin.de
       </A><BR>
    <I>Fri Mar 10 20:07:07 UTC 2000</I>
    <P><UL>
        <LI>Previous message: <A HREF="000772.html">More mangling issues
</A></li>
        <LI>Next message: <A HREF="000738.html">Layout of structures: one more tweak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#735">[ date ]</a>
              <a href="thread.html#735">[ thread ]</a>
              <a href="subject.html#735">[ subject ]</a>
              <a href="author.html#735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>To see whether the mangling mechanism is well-specified, I put a
demangler together, which I'll attach below. It is very rough code, so
excuse the missing documentation :-) I believe it does everything that
has been specified so far, except for the St/Sb compression
short-cuts, and except for local names (Z prefix).

It is written in Python, so you need a Python installation to run
it. It currently work in command-line mode, where the mangled symbol
is passed as an argument, eg.

punica loewis 92 ( ~/work/cxxabi ) &gt; ./demangle.py _Z5firstI3DuoEvT1_
void first&lt;Duo&gt;(/*T1=*/Duo)

You'll notice that it does not process all examples correctly; in
these cases, I either consider the example incorrect, or think that
the mangling mechanism is wrong as specified in the first place. Of
course, there also may be bugs left, please let me know.

While writing this demangler, I *think* I made sure that demangling is
unambiguous in all cases, so the only problem left for proof would be
to show that there is exactly one mangling for every possible
declaration. Eg. I would not catch the case that

  foo(void (*)(void))

could be either mangled as _Z3fooPFvvE or _Z3fooPFvE with the current
spec, which does not say whether the empty argument list is mangled as
(void) or not.

Anyway, comments are appreciated.

Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: demangle.py
Type: application/octet-stream
Size: 10028 bytes
Desc: not available
URL: &lt;<A HREF="http://sourcerytools.com/pipermail/cxx-abi-dev/attachments/20000310/ddb4cb8d/attachment.obj">http://sourcerytools.com/pipermail/cxx-abi-dev/attachments/20000310/ddb4cb8d/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000772.html">More mangling issues
</A></li>
	<LI>Next message: <A HREF="000738.html">Layout of structures: one more tweak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#735">[ date ]</a>
              <a href="thread.html#735">[ thread ]</a>
              <a href="subject.html#735">[ subject ]</a>
              <a href="author.html#735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
