<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Fw%3A%20%5Bcxx-abi-dev%5D%20Decimal%20Floating%20Point%20mangling%20was%28Fw%3A%20%20%5Bcxx-abi-dev%5D%0A%20C%2B%2B0x%3A%20Mangling%20of%20rvalue%20reference%20type%29s&In-Reply-To=%3C46CA0F80.4010706%40hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001935.html">
   <LINK REL="Next"  HREF="001937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s</H1>
    <B>PremAnand M Rao</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Fw%3A%20%5Bcxx-abi-dev%5D%20Decimal%20Floating%20Point%20mangling%20was%28Fw%3A%20%20%5Bcxx-abi-dev%5D%0A%20C%2B%2B0x%3A%20Mangling%20of%20rvalue%20reference%20type%29s&In-Reply-To=%3C46CA0F80.4010706%40hp.com%3E"
       TITLE="Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s">premanand.rao at hp.com
       </A><BR>
    <I>Mon Aug 20 22:02:40 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001935.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
        <LI>Next message: <A HREF="001937.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1938">[ date ]</a>
              <a href="thread.html#1938">[ thread ]</a>
              <a href="subject.html#1938">[ subject ]</a>
              <a href="author.html#1938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Michael,

I am not sure what you said &quot;Absolutely not&quot; to.

 &gt; The point is that for platforms that support native types, the
 &gt; native type mangling is available for a potentially more efficient
 &gt; implementation. For platforms that can only support emulation,
 &gt; the class library type and its mangling is available. Have I missed
 &gt; the point?

I may have misunderstood what you are saying, if so, please correct me.
The current C++ TR specification permits an implementation to choose to 
implement the Decimal FP types as either a native type or a class type, 
if it preserves the semantics of a class type.   If the mangling for the 
type are different based on how they are implemented, it removes a lot 
of flexibility from this choice.

PremAnand.

Michael Wong wrote:
&gt;<i> Absolutely not. That would be silly even to me.
</I>&gt;<i> I want to settle the mangling chosen for the native type for platforms that
</I>&gt;<i> can support it. I am not saying there should not coexists different
</I>&gt;<i> manglings for class types and native types.
</I>&gt;<i> What Mark wanted, I believe was a rationale to explain why there  exists
</I>&gt;<i> both types and their mangling and that is what I am seeing a convergence
</I>&gt;<i> here in this discussion, for which I am glad.
</I>&gt;<i> The point is that for platforms that support native types, the native type
</I>&gt;<i> mangling is available for a potentially more efficient implementation. For
</I>&gt;<i> platforms that can only support emulation, the class library type and its
</I>&gt;<i> mangling is available. Have I missed the point?
</I>&gt;<i> 
</I>&gt;<i> What I was hoping to ask was if people are sufficiently happy with this
</I>&gt;<i> state so that I can write up the mangling addendum proposal?
</I>&gt;<i> 
</I>&gt;<i> Michael Wong
</I>&gt;<i> XL C++ Compiler kernel Development
</I>&gt;<i> IBM Canada Ltd., C2/KD2/8200/MKM
</I>&gt;<i> 8200 Warden Avenue
</I>&gt;<i> Markham, Ontario  L6G 1C7
</I>&gt;<i> W:905-413-3283 F:905-413-4839
</I>&gt;<i> Boost test results
</I>&gt;<i> <A HREF="http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911">http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911</A>
</I>&gt;<i> 
</I>&gt;<i> C/C++ Compilers Support Page
</I>&gt;<i> <A HREF="http://www.ibm.com/software/awdtools/ccompilers/support/">http://www.ibm.com/software/awdtools/ccompilers/support/</A>
</I>&gt;<i> C/C++ Feature Request Interface
</I>&gt;<i> <A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005811">http://www.ibm.com/support/docview.wss?uid=swg27005811</A>
</I>&gt;<i> XL Fortran Compiler Support Page
</I>&gt;<i> <A HREF="http://www.ibm.com/software/awdtools/fortran/xlfortran/support/">http://www.ibm.com/software/awdtools/fortran/xlfortran/support/</A>
</I>&gt;<i> XL Fortran Feature Request Interface
</I>&gt;<i> <A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005812">http://www.ibm.com/support/docview.wss?uid=swg27005812</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>                                                                            
</I>&gt;<i>              Sean                                                          
</I>&gt;<i>              Perry/Toronto/IBM                                             
</I>&gt;<i>              @IBMCA                                                     To 
</I>&gt;<i>                                        Michael Wong/Toronto/<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">IBM at IBMCA</A>      
</I>&gt;<i>              08/20/2007 09:28                                           cc 
</I>&gt;<i>              AM                        <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">cxx-abi-dev at codesourcery.com</A>,       
</I>&gt;<i>                                        Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt;, 
</I>&gt;<i>                                        <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">premanand.rao at hp.com</A>                
</I>&gt;<i>                                                                    Subject 
</I>&gt;<i>                                        Re:  Fw: [cxx-abi-dev] Decimal      
</I>&gt;<i>                                        Floating Point mangling was(Fw:     
</I>&gt;<i>                                        [cxx-abi-dev] C++0x: Mangling of    
</I>&gt;<i>                                        rvalue reference type)s             
</I>&gt;<i>                                                                            
</I>&gt;<i>                                                                            
</I>&gt;<i>                                                                            
</I>&gt;<i>                                                                            
</I>&gt;<i>                                                                            
</I>&gt;<i>                                                                            
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Are you trying to say that the C++ class type shall be binary compatible
</I>&gt;<i> with the C native type?  That is going to fail immediately on parameter
</I>&gt;<i> passing and return values.  And if we say that, then someone can throw a C
</I>&gt;<i> native type and catch it as the C++ class type.  Similar odd behaviour
</I>&gt;<i> would happen with dynamic casting.  The fact is that we have two different
</I>&gt;<i> types because C++ choose to implement decimal floating point as a class.
</I>&gt;<i> We need two different mangling schemes.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Sean Perry
</I>&gt;<i> Compiler Development
</I>&gt;<i> IBM Canada Lab
</I>&gt;<i> (905)-413-6031 (tie 969-6031), fax (905)-413-4839
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>              Michael
</I>&gt;<i>              Wong/Toronto/IBM
</I>&gt;<i>                                                                         To
</I>&gt;<i>              08/20/2007 08:23          Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt;
</I>&gt;<i>              AM                                                         cc
</I>&gt;<i>                                        <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">cxx-abi-dev at codesourcery.com</A>,
</I>&gt;<i>                                        <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">premanand.rao at hp.com</A>, Sean
</I>&gt;<i>                                        Perry/Toronto/<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">IBM at IBMCA</A>
</I>&gt;<i>                                                                    Subject
</I>&gt;<i>                                        Re:  Fw: [cxx-abi-dev] Decimal
</I>&gt;<i>                                        Floating Point mangling was(Fw:
</I>&gt;<i>                                        [cxx-abi-dev] C++0x: Mangling of
</I>&gt;<i>                                        rvalue reference type)s(Document
</I>&gt;<i>                                        link: Sean Perry)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I believe one of the point of an ABI is to settle on one type where there
</I>&gt;<i> are ambiguity or possible differences in choices. Otherwise, it is not an
</I>&gt;<i> ABI and there would be no interoperability.
</I>&gt;<i> So I agree with Dennis that having both types would be confusing. I have no
</I>&gt;<i> problem putting forward a case in the ABI document to support the native
</I>&gt;<i> DFP type choice. In fact, I believe this was one of the thing that Mark
</I>&gt;<i> Mitchell had asked me to do after coming up with a mangling scheme. I am
</I>&gt;<i> somewhat glad that we have converged to that same point of view.
</I>&gt;<i> 
</I>&gt;<i> Is this agreed?
</I>&gt;<i> 
</I>&gt;<i> Michael Wong
</I>&gt;<i> XL C++ Compiler kernel Development
</I>&gt;<i> IBM Canada Ltd., C2/KD2/8200/MKM
</I>&gt;<i> 8200 Warden Avenue
</I>&gt;<i> Markham, Ontario  L6G 1C7
</I>&gt;<i> W:905-413-3283 F:905-413-4839
</I>&gt;<i> Boost test results
</I>&gt;<i> <A HREF="http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911">http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> C/C++ Compilers Support Page
</I>&gt;<i> <A HREF="http://www.ibm.com/software/awdtools/ccompilers/support/">http://www.ibm.com/software/awdtools/ccompilers/support/</A>
</I>&gt;<i> C/C++ Feature Request Interface
</I>&gt;<i> <A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005811">http://www.ibm.com/support/docview.wss?uid=swg27005811</A>
</I>&gt;<i> XL Fortran Compiler Support Page
</I>&gt;<i> <A HREF="http://www.ibm.com/software/awdtools/fortran/xlfortran/support/">http://www.ibm.com/software/awdtools/fortran/xlfortran/support/</A>
</I>&gt;<i> XL Fortran Feature Request Interface
</I>&gt;<i> <A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005812">http://www.ibm.com/support/docview.wss?uid=swg27005812</A>
</I>&gt;<i> 
</I>&gt;<i> Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt; wrote on 08/17/2007 09:19:44 PM:
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> From: Sean Perry &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">perry at ca.ibm.com</A>&gt;
</I>&gt;&gt;&gt;<i> Yes, the native type and the standard class are different types.
</I>&gt;&gt;<i> Then this may cause conflicts between the vendor's compiler and the
</I>&gt;<i> foreign
</I>&gt;&gt;<i> devil compilers if they try to interoperate and each does it differently.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I suppose an extern &quot;C&quot; interface would work to get around the mangling
</I>&gt;&gt;<i> issues.  At least for decimal.  Complex may have other issues.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001935.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
	<LI>Next message: <A HREF="001937.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1938">[ date ]</a>
              <a href="thread.html#1938">[ thread ]</a>
              <a href="subject.html#1938">[ subject ]</a>
              <a href="author.html#1938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
