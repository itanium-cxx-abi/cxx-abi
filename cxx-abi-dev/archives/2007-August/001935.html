<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Fw%3A%20%5Bcxx-abi-dev%5D%20Decimal%20Floating%20Point%20mangling%20was%28Fw%3A%20%20%5Bcxx-abi-dev%5D%20C%2B%2B0x%3A%20Mangling%0A%20of%20rvalue%20reference%20type%29s&In-Reply-To=%3COFBC792155.F94AB672-ON8525733D.0056C504-8525733D.005751CD%40ca.ibm.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001936.html">
   <LINK REL="Next"  HREF="001938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s</H1>
    <B>Michael Wong</B> 
    <A HREF="mailto:cxx-abi-dev%40codesourcery.com?Subject=Re%3A%20Fw%3A%20%5Bcxx-abi-dev%5D%20Decimal%20Floating%20Point%20mangling%20was%28Fw%3A%20%20%5Bcxx-abi-dev%5D%20C%2B%2B0x%3A%20Mangling%0A%20of%20rvalue%20reference%20type%29s&In-Reply-To=%3COFBC792155.F94AB672-ON8525733D.0056C504-8525733D.005751CD%40ca.ibm.com%3E"
       TITLE="Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s">michaelw at ca.ibm.com
       </A><BR>
    <I>Mon Aug 20 15:53:46 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001936.html">[cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
        <LI>Next message: <A HREF="001938.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1935">[ date ]</a>
              <a href="thread.html#1935">[ thread ]</a>
              <a href="subject.html#1935">[ subject ]</a>
              <a href="author.html#1935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Absolutely not. That would be silly even to me.
I want to settle the mangling chosen for the native type for platforms that
can support it. I am not saying there should not coexists different
manglings for class types and native types.
What Mark wanted, I believe was a rationale to explain why there  exists
both types and their mangling and that is what I am seeing a convergence
here in this discussion, for which I am glad.
The point is that for platforms that support native types, the native type
mangling is available for a potentially more efficient implementation. For
platforms that can only support emulation, the class library type and its
mangling is available. Have I missed the point?

What I was hoping to ask was if people are sufficiently happy with this
state so that I can write up the mangling addendum proposal?

Michael Wong
XL C++ Compiler kernel Development
IBM Canada Ltd., C2/KD2/8200/MKM
8200 Warden Avenue
Markham, Ontario  L6G 1C7
W:905-413-3283 F:905-413-4839
Boost test results
<A HREF="http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911">http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911</A>

C/C++ Compilers Support Page
<A HREF="http://www.ibm.com/software/awdtools/ccompilers/support/">http://www.ibm.com/software/awdtools/ccompilers/support/</A>
C/C++ Feature Request Interface
<A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005811">http://www.ibm.com/support/docview.wss?uid=swg27005811</A>
XL Fortran Compiler Support Page
<A HREF="http://www.ibm.com/software/awdtools/fortran/xlfortran/support/">http://www.ibm.com/software/awdtools/fortran/xlfortran/support/</A>
XL Fortran Feature Request Interface
<A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005812">http://www.ibm.com/support/docview.wss?uid=swg27005812</A>


                                                                           
             Sean                                                          
             Perry/Toronto/IBM                                             
             @IBMCA                                                     To 
                                       Michael Wong/Toronto/<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">IBM at IBMCA</A>      
             08/20/2007 09:28                                           cc 
             AM                        <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">cxx-abi-dev at codesourcery.com</A>,       
                                       Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt;, 
                                       <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">premanand.rao at hp.com</A>                
                                                                   Subject 
                                       Re:  Fw: [cxx-abi-dev] Decimal      
                                       Floating Point mangling was(Fw:     
                                       [cxx-abi-dev] C++0x: Mangling of    
                                       rvalue reference type)s             
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




Are you trying to say that the C++ class type shall be binary compatible
with the C native type?  That is going to fail immediately on parameter
passing and return values.  And if we say that, then someone can throw a C
native type and catch it as the C++ class type.  Similar odd behaviour
would happen with dynamic casting.  The fact is that we have two different
types because C++ choose to implement decimal floating point as a class.
We need two different mangling schemes.

--
Sean Perry
Compiler Development
IBM Canada Lab
(905)-413-6031 (tie 969-6031), fax (905)-413-4839




             Michael
             Wong/Toronto/IBM
                                                                        To
             08/20/2007 08:23          Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt;
             AM                                                         cc
                                       <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">cxx-abi-dev at codesourcery.com</A>,
                                       <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">premanand.rao at hp.com</A>, Sean
                                       Perry/Toronto/<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">IBM at IBMCA</A>
                                                                   Subject
                                       Re:  Fw: [cxx-abi-dev] Decimal
                                       Floating Point mangling was(Fw:
                                       [cxx-abi-dev] C++0x: Mangling of
                                       rvalue reference type)s(Document
                                       link: Sean Perry)









I believe one of the point of an ABI is to settle on one type where there
are ambiguity or possible differences in choices. Otherwise, it is not an
ABI and there would be no interoperability.
So I agree with Dennis that having both types would be confusing. I have no
problem putting forward a case in the ABI document to support the native
DFP type choice. In fact, I believe this was one of the thing that Mark
Mitchell had asked me to do after coming up with a mangling scheme. I am
somewhat glad that we have converged to that same point of view.

Is this agreed?

Michael Wong
XL C++ Compiler kernel Development
IBM Canada Ltd., C2/KD2/8200/MKM
8200 Warden Avenue
Markham, Ontario  L6G 1C7
W:905-413-3283 F:905-413-4839
Boost test results
<A HREF="http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911">http://www-1.ibm.com/support/docview.wss?rs=2239&amp;context=SSJT9L&amp;uid=swg27006911</A>


C/C++ Compilers Support Page
<A HREF="http://www.ibm.com/software/awdtools/ccompilers/support/">http://www.ibm.com/software/awdtools/ccompilers/support/</A>
C/C++ Feature Request Interface
<A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005811">http://www.ibm.com/support/docview.wss?uid=swg27005811</A>
XL Fortran Compiler Support Page
<A HREF="http://www.ibm.com/software/awdtools/fortran/xlfortran/support/">http://www.ibm.com/software/awdtools/fortran/xlfortran/support/</A>
XL Fortran Feature Request Interface
<A HREF="http://www.ibm.com/support/docview.wss?uid=swg27005812">http://www.ibm.com/support/docview.wss?uid=swg27005812</A>

Dennis Handly &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">dhandly at cup.hp.com</A>&gt; wrote on 08/17/2007 09:19:44 PM:

&gt;<i> &gt;From: Sean Perry &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">perry at ca.ibm.com</A>&gt;
</I>&gt;<i> &gt;Yes, the native type and the standard class are different types.
</I>&gt;<i>
</I>&gt;<i> Then this may cause conflicts between the vendor's compiler and the
</I>foreign
&gt;<i> devil compilers if they try to interoperate and each does it differently.
</I>&gt;<i>
</I>&gt;<i> I suppose an extern &quot;C&quot; interface would work to get around the mangling
</I>&gt;<i> issues.  At least for decimal.  Complex may have other issues.
</I>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001936.html">[cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
	<LI>Next message: <A HREF="001938.html">Fw: [cxx-abi-dev] Decimal Floating Point mangling was(Fw:  [cxx-abi-dev] C++0x: Mangling of rvalue reference type)s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1935">[ date ]</a>
              <a href="thread.html#1935">[ thread ]</a>
              <a href="subject.html#1935">[ subject ]</a>
              <a href="author.html#1935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/cxx-abi-dev">More information about the cxx-abi-dev
mailing list</a><br>
</body></html>
